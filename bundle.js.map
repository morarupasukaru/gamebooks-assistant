{"version":3,"file":"bundle.js","sources":["webpack:///bundle.js"],"sourcesContent":["webpackJsonp([0],[function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}var r=n(1),i=a(r),s=n(2),o=a(s),l=n(3),c=a(l),u=n(5),d=a(u),p=n(6),h=a(p),f=n(7),v=a(f),g=n(9),m=a(g),b=n(128),y=a(b);n(134),c[\"default\"].module(\"app\",[d[\"default\"],h[\"default\"],v[\"default\"],m[\"default\"].name]).config([\"$translateProvider\",function(e){e.translations(\"en\",i[\"default\"]),e.translations(\"fr\",o[\"default\"]),e.preferredLanguage(\"en\"),e.useSanitizeValueStrategy(\"escape\")}]).config([\"$compileProvider\",function(e){e.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|file|blob):/)}]).directive(\"onReadFile\",function(e){return{restrict:\"A\",scope:!1,link:function(t,n,a){var r=e(a.onReadFile);n.on(\"change\",function(e){var n=new FileReader;n.onload=function(e){t.$apply(function(){r(t,{$fileContent:e.target.result})})},n.readAsText((e.srcElement||e.target).files[0])})}}}).directive(\"app\",y[\"default\"])},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={yesno_true:\"yes\",yesno_false:\"no\",NumberOfParagraphs:'{{ (!!numberOfParagraphs ? numberOfParagraphs + \" paragraphs\" : \"\") }}',ChoiceAdventure:'Select the adventure \"{{ adventureName }}\"',ChoosenAdventure:'The adventure \"{{ adventureName }}\" is choosen',ChoiceGame:'Select the game \"{{ adventureName }}\" of the player \"{{ playerName }}\"',ChoosenGame:'The game \"{{ adventureName }}\" of the player \"{{ playerName }}\" is choosen',ChoiceLibrary:'Select the library \"{{ siteName }}\"',ChoosenLibrary:'The library \"{{ siteName }}\" is choosen',DupplicateParagraph:'The paragraph \"{{paragraphNr}}\" already exist',ExportGame:\"Export the game of '{{playerName}}' from the adventure '{{adventureName}}'\",ExportAdventure:\"Export the adventure of '{{adventureName}}'\",export_file:\"Download file\",export_email:\"Sent email\",export_text:\"Text\",import_file:\"Upload file\",import_text:\"Text\",\"error.adventureAlreadyExist\":\"Adventure already exists\",\"error.libraryAlreadyExist\":\"Library already exists (JSON url)\"};t[\"default\"]=n},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={};t[\"default\"]=n},,,,,,,function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(10),o=a(s),l=n(104),c=a(l),u=n(127),d=a(u),p=i[\"default\"].module(\"app.components\",[d[\"default\"].name,c[\"default\"].name,o[\"default\"].name]);t[\"default\"]=p},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(11),o=a(s),l=n(54),c=a(l),u=i[\"default\"].module(\"app.components.gui\",[o[\"default\"].name,c[\"default\"].name]);t[\"default\"]=u},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(12),o=a(s),l=n(15),c=a(l),u=n(19),d=a(u),p=n(22),h=a(p),f=n(26),v=a(f),g=n(30),m=a(g),b=n(33),y=a(b),w=n(36),S=a(w),P=n(39),$=a(P),k=n(42),R=a(k),C=n(46),_=a(C),x=n(50),D=a(x),E=i[\"default\"].module(\"app.components.gui.components\",[o[\"default\"].name,c[\"default\"].name,d[\"default\"].name,h[\"default\"].name,v[\"default\"].name,m[\"default\"].name,y[\"default\"].name,S[\"default\"].name,$[\"default\"].name,R[\"default\"].name,_[\"default\"].name,D[\"default\"].name]);t[\"default\"]=E},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(13),o=a(s),l=n(14),c=a(l),u=i[\"default\"].module(\"app.components.gui.components.dices\",[]).component(\"dices\",{template:o[\"default\"],controller:c[\"default\"]});t[\"default\"]=u},function(e,t){e.exports='<form>\\n    <table class=\"table table-striped\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:85%\">\\n        <col style=\"width:5%\">\\n        <thead>\\n        <tr>\\n            <th>\\n                <ng-include src=\"\\'dice-image.html\\'\"></ng-include>\\n            </th>\\n            <th></th>\\n            <th>{{ \\'Sum of dices value\\' | translate }}</th>\\n            <th></th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr>\\n            <td>\\n                <button class=\"btn btn-default\"\\n                        ng-click=\"$ctrl.roll1d6()\"\\n                        aria-label=\"{{ \\'Roll one dice 6 faces\\' | translate }}\"\\n                        title=\"{{ \\'Roll one dice 6 faces\\' | translate }}\">\\n                    {{ \\'x1\\' | translate }}\\n                </button>\\n            </td>\\n            <td>\\n                <button class=\"btn btn-default\"\\n                        ng-click=\"$ctrl.roll2d6()\"\\n                        aria-label=\"{{ \\'Roll two dices 6 faces\\' | translate }}\"\\n                        title=\"{{ \\'Roll two dices 6 faces\\' | translate }}\">\\n                    {{ \\'x2\\' | translate }}\\n                </button>\\n            </td>\\n            <td>\\n                {{ $ctrl.dicesValue }}\\n            </td>\\n            <td>\\n                <button class=\"btn btn-default glyphicon glyphicon-erase\"\\n                        title=\"{{ \\'Clear values\\' | translate }}\"\\n                        aria-label=\"{{ \\'Clear values\\' | translate }}\"\\n                        ng-click=\"$ctrl.clear()\">\\n\\n                </button>\\n            </td>\\n        </tr>\\n        </tbody>\\n    </table>\\n</form>\\n\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.dicesService=t,this.clear()}return e.$inject=[\"dicesService\"],a(e,[{key:\"roll2d6\",value:function(){this.appendToResult(this.dicesService.rollDices(2,6))}},{key:\"roll1d6\",value:function(){this.appendToResult(this.dicesService.rollDices(1,6))}},{key:\"clear\",value:function(){this.dicesValue=\"\"}},{key:\"appendToResult\",value:function(e){\"\"!==this.dicesValue&&(this.dicesValue=this.dicesValue+\",\"),this.dicesValue=this.dicesValue+e}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(16),o=a(s),l=n(17),c=a(l),u=n(18),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.messages\",[]).service(\"messagesService\",o[\"default\"]).component(\"messages\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){n(this,e),this.$rootScope=t,this.$translate=a,this.$rootScope.messages||(this.$rootScope.messages=[])}return e.$inject=[\"$rootScope\",\"$translate\"],a(e,[{key:\"getMessages\",value:function(){return this.$rootScope.messages||[]}},{key:\"clearMessages\",value:function(){this.$rootScope.messages.forEach(function(e,t,n){e.keepAfterLocationChange||n.splice(t,1)})}},{key:\"removeMessage\",value:function(e){this.$rootScope.messages.splice(e,1)}},{key:\"successMessage\",value:function(e,t){this._addMessage(e,\"success\",t)}},{key:\"errorMessage\",value:function(e,t){this._addMessage(e,\"error\",t)}},{key:\"infoMessage\",value:function(e,t){this._addMessage(e,\"info\",t)}},{key:\"_addMessage\",value:function(e,t,n){var a=this.$translate.instant(e);this._hasMessage(a,t)||this.$rootScope.messages.push({message:a,type:t,keepAfterLocationChange:n})}},{key:\"_hasMessage\",value:function(e,t){for(var n=!1,a=0;a<this.$rootScope.messages.length;a++)if(this.$rootScope.messages[a].message===e&&this.$rootScope.messages[a].type===t){n=!0;break}return n}}]),e}();t[\"default\"]=r},function(e,t){e.exports='<div ng-repeat=\"msg in $ctrl.messages\">\\n    <div class=\"alert alert-{{ msg.type === \\'error\\' ? \\'danger\\' : msg.type }}\">\\n        {{ msg.message }}\\n        <a class=\"close\" ng-click=\"$ctrl.removeMessage($index)\">&times;</a>\\n    </div>\\n</div>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){var r=this;n(this,e),this.messagesService=t,a.$on(\"$locationChangeStart\",function(){return r.messagesService.clearMessages()}),this.messages=t.getMessages()}return e.$inject=[\"messagesService\",\"$rootScope\"],a(e,[{key:\"removeMessage\",value:function(e){this.messagesService.removeMessage(e)}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(20),c=a(l),u=n(21),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.navbar\",[o[\"default\"]]).component(\"navbar\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<nav class=\"navbar navbar-default navbar-fixed-top\" role=\"navigation\">\\n    <div class=\"container-fluid\">\\n        <div class=\"navbar-header\">\\n            <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\"\\n                    data-target=\"#navbar-collapse-1\" aria-expanded=\"false\"\\n                    ng-click=\"$ctrl.navCollapsed = !$ctrl.navCollapsed\">\\n                <span class=\"sr-only\">Toggle navigation</span>\\n                <span class=\"icon-bar\"></span>\\n                <span class=\"icon-bar\"></span>\\n                <span class=\"icon-bar\"></span>\\n            </button>\\n        </div>\\n        <div uib-collapse=\"$ctrl.navCollapsed\" class=\"collapse navbar-collapse\" id=\"navbar-collapse-1\">\\n            <ul class=\"nav navbar-nav navbar-left\">\\n                <li><a ui-sref=\"gamesList\">{{ \\'Games\\' | translate }}</a></li>\\n                <li><a ui-sref=\"adventuresList\">{{ \\'Adventures\\' | translate }}</a></li>\\n                <li><a ui-sref=\"librariesList\">{{ \\'Libraries\\' | translate }}</a></li>\\n                <li ng-if=\"$ctrl.admin\"><a ui-sref=\"administration\">{{ \\'Administration\\' | translate }}</a></li>\\n            </ul>\\n            <ul class=\"nav navbar-nav navbar-right\">\\n                <li>\\n                    <a ui-sref=\"about\"\\n                       class=\"glyphicon glyphicon-info-sign\"\\n                       aria-label=\"{{ \\'About\\' | translate}}\"\\n                       title=\"{{ \\'About\\' | translate}}\">\\n                    </a>\\n                </li>\\n            </ul>\\n            <p class=\"navbar-text navbar-right\">\\n                <a ng-repeat=\"language in $ctrl.supportedLanguages\"\\n                   href ng-click=\"$ctrl.changeLanguage(language.code)\"\\n                   ng-show=\"$ctrl.language !== language.code\"\\n                   aria-label=\"{{ \\'Change language to \\' + language.code | translate}}\"\\n                   title=\"{{ \\'Change language to \\' + language.code | translate}}\">\\n                    {{ language.code }}\\n                </a>\\n            </p>\\n        </div>\\n    </div>\\n</nav>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r){n(this,e),this.languagePickerService=r,t.intercept();var i=a.search();i.admin&&(this.admin=!0),this.navCollapsed=!0,this.initData()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"$location\",\"languagePickerService\"],a(e,[{key:\"initData\",value:function(){this.supportedLanguages=this.languagePickerService.getSupportedLanguages(),this.changeLanguage(this.languagePickerService.getSelectedLanguage())}},{key:\"changeLanguage\",value:function(e){this.language=e,this.languagePickerService.changeLanguage(e)}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(23),o=a(s),l=n(24),c=a(l),u=n(25),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.language-picker\",[]).component(\"languagePicker\",{template:o[\"default\"],controller:c[\"default\"]}).service(\"languagePickerService\",d[\"default\"]);t[\"default\"]=p},function(e,t){e.exports='<div class=\"col-md-12\">\\n    <form>\\n        <div>\\n            <div class=\"form-group\">\\n                <label for=\"language\">{{ \\'Choose language\\' | translate }}</label>\\n                <ul class=\"nav nav-pills\" role=\"tablist\" id=\"language\">\\n                    <li ng-repeat=\"language in $ctrl.supportedLanguages\" role=\"button\" ng-class=\"{ \\'active\\' : language.selected }\" title=\"{{ \\'Choice\\' | translate }} {{ language.code | translate }}\">\\n                        <a href=\"\" ng-click=\"$ctrl.changeLanguage(language.code)\">{{ language.code | translate }}</a></li>\\n                </ul>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.languagePickerService=t,this.initData()}return e.$inject=[\"languagePickerService\"],a(e,[{key:\"initData\",value:function(){this.supportedLanguages=this.languagePickerService.getSupportedLanguages(),this.changeLanguage(this.languagePickerService.getSelectedLanguage())}},{key:\"changeLanguage\",value:function(e){this.languagePickerService.changeLanguage(e)}}]),e}();t[\"default\"]=r},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r){n(this,e),this.gamePersistenceService=t,this.$translate=a,this.constants=r,this.supportedLanguages=this.initSupportedLanguages()}return e.$inject=[\"gamePersistenceService\",\"$translate\",\"constants\"],a(e,[{key:\"initSupportedLanguages\",value:function(){for(var e=[],t=0;t<this.constants.supportedLanguages.length;t++)e.push({code:this.constants.supportedLanguages[t]});return e}},{key:\"getSupportedLanguages\",value:function(){return this.supportedLanguages}},{key:\"getSelectedLanguage\",value:function(){var e=this.gamePersistenceService.getSelectedLanguage();if(e)return e;if(navigator.language){var t=void 0;for(t=0;t<this.constants.supportedLanguages.length;t++)if(this.constants.supportedLanguages[t]===navigator.language)return this.constants.supportedLanguages[t];for(t=0;t<this.constants.supportedLanguages.length;t++)if(navigator.language.startsWith(this.constants.supportedLanguages[t]))return this.constants.supportedLanguages[t]}return this.constants.supportedLanguages[0]}},{key:\"changeLanguage\",value:function(e){this.$translate.use(e),this.gamePersistenceService.setSelectedLanguage(e);for(var t=0;t<this.supportedLanguages.length;t++)this.supportedLanguages[t].selected=this.supportedLanguages[t].code===e}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(27),o=a(s),l=n(28),c=a(l),u=n(29),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.popup\",[]).component(\"popup\",{template:o[\"default\"],controller:c[\"default\"],bindings:{config:\"@\"}}).service(\"popupService\",d[\"default\"]);t[\"default\"]=p},function(e,t){e.exports='<div id=\"{{$ctrl.cfg.id}}\" class=\"modal\">\\n    <div class=\"modal-content\">\\n        <span class=\"close glyphicon glyphicon-remove-circle\" ng-click=\"$ctrl.close()\" ng-show=\"$ctrl.cfg.withCloseButton\"></span>\\n        <p>{{ $ctrl.cfg.text | translate }}</p>\\n        <span ng-repeat=\"choice in $ctrl.cfg.choices\">\\n            <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.select(choice)\">{{ choice | translate }}</button>&nbsp;\\n        </span>\\n    </div>\\n</div>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){n(this,e),this.cfg=JSON.parse(this.config),this.popupService=a,this.cfg.closeOnClickOutsideModal&&this.close()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"popupService\"],a(e,[{key:\"select\",value:function(e){this.close(e)}},{key:\"close\",value:function(e){this.popupService.close(this.cfg.id,e)}}]),e}();t[\"default\"]=r},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e),this.popups={}}return a(e,[{key:\"show\",value:function(e,t){var n=window.document.getElementById(e);n.style.display=\"block\",this.popups[e]=t}},{key:\"close\",value:function(e,t){var n=window.document.getElementById(e);n.style.display=\"none\";var a=this.popups[e];a&&a(e,t),delete this.popups[e]}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(31),o=a(s),l=n(32),c=a(l),u=i[\"default\"].module(\"app.components.gui.screen.items\",[]).component(\"items\",{template:o[\"default\"],controller:c[\"default\"],bindings:{gameId:\"@?\",items:\"=\"}});t[\"default\"]=u},function(e,t){e.exports='<form name=\"itemsTableForm\" novalidate=\"novalidate\">\\n    <table class=\"table table-striped\">\\n        <col style=\"width:10%\">\\n        <col style=\"width:75%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <thead>\\n        <tr>\\n            <th>{{ \\'Quantity\\' | translate }}</th>\\n            <th>{{ \\'Item\\' | translate }}</th>\\n            <th></th>\\n            <th></th>\\n            <th>\\n                <button type=\"button\"\\n                        class=\"btn btn-default\"\\n                        aria-label=\"{{ \\'Add item\\' | translate}}\"\\n                        title=\"{{ \\'Add item\\' | translate}}\"\\n                        ng-show=\"!$ctrl.hasEditedRow()\"\\n                        ng-click=\"$ctrl.addRow()\">\\n                    <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n                </button>\\n            </th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\"row in $ctrl.rows\">\\n            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                {{ row.quantity }}\\n            </td>\\n            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                <input required name=\"quantity\" type=\"number\" class=\"form-control\" ng-model=\"row.quantity\">\\n                <div class=\"error\" ng-show=\"!row.quantity\">\\n                    <!-- check error only on field -->\\n                    {{ \\'Please fill the quantity\\' | translate }}\\n                </div>\\n            </td>\\n\\n            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                {{ row.description }}\\n            </td>\\n            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                <input required name=\"description\" type=\"text\" class=\"form-control description\" ng-model=\"row.description\">\\n                <div class=\"error\" ng-show=\"!row.description\">\\n                    <!-- check error only on field -->\\n                    {{ \\'Please fill the description\\' | translate }}\\n                </div>\\n            </td>\\n\\n            <td>\\n                <button type=\"button\" class=\"btn btn-success\"\\n                        aria-label=\"{{ \\'Save item changes\\' | translate}}\"\\n                        title=\"{{ \\'Save item changes\\' | translate}}\"\\n                        ng-click=\"$ctrl.saveRowChanges(notesTableForm.$invalid)\"\\n                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                    <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>\\n                </button>\\n            </td>\\n\\n            <td>\\n                <button type=\"button\" class=\"btn btn-danger\"\\n                        aria-label=\"{{ \\'Abort item changes\\' | translate}}\"\\n                        title=\"{{ \\'Abort item changes\\' | translate}}\"\\n                        ng-click=\"$ctrl.abortRowChanges()\"\\n                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                    <span class=\"glyphicon glyphicon-arrow-left\" aria-hidden=\"true\"></span>\\n                </button>\\n            </td>\\n\\n            <td>\\n                <button type=\"button\" class=\"btn btn-default\"\\n                        aria-label=\"{{ \\'Edit item\\' | translate }} \\'{{ row.description | translate }}\\'\"\\n                        title=\"{{ \\'Edit item\\' | translate }} \\'{{ row.description | translate }}\\'\"\\n                        ng-click=\"$ctrl.editRow(row)\"\\n                        ng-show=\"!$ctrl.hasEditedRow()\">\\n                    <span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\"></span>\\n                </button>\\n                <button type=\"button\" class=\"btn btn-danger\"\\n                        aria-label=\"{{ \\'Remove item\\' | translate }} \\'{{ row.description | translate }}\\'\"\\n                        title=\"{{ \\'Remove item\\' | translate }} \\'{{ row.description | translate }}\\'\"\\n                        ng-click=\"$ctrl.displayRemovePopup(row)\"\\n                        ng-disabled=\"$ctrl.addedRow\"\\n                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                    <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\\n                </button>\\n            </td>\\n        </tr>\\n        </tbody>\\n    </table>\\n</form>\\n\\n<popup config=\"{{ $ctrl.popupDeleteItemConfig }}\"></popup>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i){n(this,e),t.intercept(),this.rows=this.items,this.popupService=a,this.constants=r,this.gamePersistenceService=i,this.popupDeleteItemConfig={id:\"popupDeleteItem\",text:\"Are you sure to remove the item?\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1}}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"popupService\",\"constants\",\"gamePersistenceService\"],a(e,[{key:\"addRow\",value:function(){var e={quantity:1};this.rows.push(e),this.addedRow=e}},{key:\"displayRemovePopup\",value:function(e){this.rowToBeRemoved=e;var t=this;this.popupService.show(this.popupDeleteItemConfig.id,function(e,n){n===t.constants.choices.yes&&t.removeRow(t.rowToBeRemoved),t.rowToBeRemoved=null})}},{key:\"removeRow\",value:function(e){var t=this.rows.indexOf(e);this.rows.splice(t,1),this.clearEditedRow(),this.saveInPersistence()}},{key:\"editRow\",value:function(e){this.editedRow=e,this.originalRow={quantity:e.quantity,description:e.description}}},{key:\"isRowEdited\",value:function(e){return e===this.editedRow||e===this.addedRow}},{key:\"hasEditedRow\",value:function(){return!!this.editedRow||!!this.addedRow}},{key:\"saveRowChanges\",value:function(e){e||(this.clearEditedRow(),this.saveInPersistence())}},{key:\"abortRowChanges\",value:function(){this.addedRow&&this.removeRow(this.addedRow),this.editedRow&&(this.editedRow.quantity=this.originalRow.quantity,this.editedRow.description=this.originalRow.description),this.clearEditedRow()}},{key:\"clearEditedRow\",value:function(){this.addedRow=null,this.editedRow=null,this.originalRow=null}},{key:\"saveInPersistence\",value:function(){if(this.gameId){var e=this.gamePersistenceService.getGame(this.gameId);e.items=this.items,this.gamePersistenceService.updateGame(e)}}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(34),o=a(s),l=n(35),c=a(l),u=i[\"default\"].module(\"app.components.gui.screen.stats\",[]).component(\"stats\",{template:o[\"default\"],controller:c[\"default\"],bindings:{gameId:\"@\",stats:\"=\"}});t[\"default\"]=u},function(e,t){e.exports='<table class=\"table\">\\n    <col style=\"width:10%\">\\n    <col style=\"width:20%\">\\n    <col style=\"width:10%\">\\n    <col style=\"width:70%\">\\n    <col style=\"width:5%\">\\n    <col style=\"width:5%\">\\n    <thead>\\n    <tr>\\n        <th>{{ \\'Stats\\' | translate }}</th>\\n        <th>{{ \\'Current\\' | translate }}</th>\\n        <th>{{ \\'Initial\\' | translate }}</th>\\n        <th></th>\\n        <th></th>\\n        <th></th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n    <tr ng-repeat=\"row in $ctrl.stats\">\\n        <td>{{ row.name }}</td>\\n        <td>{{ row.current }}</td>\\n        <td>{{ row.initial }}</td>\\n        <td></td>\\n        <td>\\n            <button type=\"button\" class=\"btn btn-default\" aria-label=\"{{ \\'Increment\\' | translate }} {{ row.name | translate }}\" title=\"{{ \\'Increment\\' | translate }} {{ row.name | translate }}\" ng-click=\"$ctrl.increment(row)\">\\n                <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n            </button>\\n        </td>\\n        <td>\\n            <button type=\"button\" class=\"btn btn-default\" aria-label=\"{{ \\'Decrement\\' | translate }} {{ row.name | translate }}\" title=\"{{ \\'Decrement\\' | translate }} {{ row.name | translate }}\" ng-click=\"$ctrl.decrement(row)\">\\n                <span class=\"glyphicon glyphicon-minus\" aria-hidden=\"true\"></span>\\n            </button>\\n        </td>\\n    </tr>\\n    </tbody>\\n</table>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){n(this,e),this.gamePersistenceService=a,t.intercept()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"gamePersistenceService\"],a(e,[{key:\"increment\",value:function(e){e.current=e.current+1,this.save()}},{key:\"decrement\",value:function(e){e.current=e.current-1,this.save()}},{key:\"save\",value:function(){var e=this.gamePersistenceService.getGame(this.gameId);e.stats=this.stats,this.gamePersistenceService.updateGame(e)}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(37),o=a(s),l=n(38),c=a(l),u=i[\"default\"].module(\"app.components.gui.screen.paragraph\",[]).component(\"paragraph\",{template:o[\"default\"],controller:c[\"default\"],bindings:{gameId:\"@\",paragraph:\"=\"}});t[\"default\"]=u},function(e,t){e.exports='<table class=\"table table-borderless\">\\n    <col style=\"width:95%\">\\n    <col style=\"width:5%\">\\n    <thead>\\n    <tr>\\n        <th>{{ \\'Description\\' | translate }}</th>\\n        <th>\\n        </th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n    <tr>\\n        <td>\\n            <div contenteditable=\"true\" id=\"inputCurrentDescription\" class=\"form-control editable-div\" ng-model=\"$ctrl.paragraph.description\" ng-readonly=\"!$ctrl.isDescriptionEditable()\"></div>\\n        </td>\\n        <td>\\n            <button type=\"button\" class=\"btn btn-default\"\\n                    aria-label=\"{{ \\'Edit description\\' | translate}}\"\\n                    title=\"{{ \\'Edit description\\' | translate}}\"\\n                    ng-click=\"$ctrl.editDescription()\"\\n                    ng-show=\"!$ctrl.isDescriptionEditable()\">\\n                <span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\"></span>\\n            </button>\\n            <button type=\"button\" class=\"btn btn-success\"\\n                    aria-label=\"{{ \\'Save description changes\\' | translate}}\"\\n                    title=\"{{ \\'Save description changes\\' | translate}}\"\\n                    ng-click=\"$ctrl.saveDescriptionChanges()\"\\n                    ng-show=\"$ctrl.isDescriptionEditable()\">\\n                <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>\\n            </button>\\n            <button type=\"button\" class=\"btn btn-danger\"\\n                    aria-label=\"{{ \\'Abort description changes\\' | translate}}\"\\n                    title=\"{{ \\'Abort description changes\\' | translate}}\"\\n                    ng-click=\"$ctrl.abortDescriptionChanges()\"\\n                    ng-show=\"$ctrl.isDescriptionEditable()\">\\n                <span class=\"glyphicon glyphicon-arrow-left\" aria-hidden=\"true\"></span>\\n            </button>\\n        </td>\\n    </tr>\\n    </tbody>\\n</table>\\n\\n<form name=\"choicesTableForm\" novalidate=\"novalidate\">\\n    <table class=\"table table-striped\">\\n        <col style=\"width:10%\">\\n        <col style=\"width:75%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <thead>\\n        <tr>\\n            <th>{{ \\'Choice\\' | translate }}</th>\\n            <th>{{ \\'Description\\' | translate }}</th>\\n            <th></th>\\n            <th></th>\\n            <th>\\n                <button type=\"button\" class=\"btn btn-default\"\\n                        aria-label=\"{{ \\'Add choice\\' | translate}}\"\\n                        title=\"{{ \\'Add choice\\' | translate}}\"\\n                        ng-click=\"$ctrl.addRow()\"\\n                        ng-show=\"!$ctrl.hasEditedRow()\">\\n                    <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n                </button>\\n            </th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n            <tr ng-repeat=\"row in $ctrl.paragraph.choices\">\\n                <td ng-if=\"!$ctrl.isRowEdited(row) && !$ctrl.hasEditedRow()\">\\n                    <button type=\"button\" class=\"btn btn-default\"\\n                            aria-label=\"{{ \\'Choice paragragh\\' | translate}} {{ row.paragraphNr }}\"\\n                            title=\"{{ \\'Choice paragragh\\' | translate}} \\'{{ row.paragraphNr }}\\'\"\\n                            ng-click=\"$ctrl.goTo(row.paragraphNr)\">\\n                        <div ng-if=\"!!$ctrl.isAlreadyChoosen(row)\">{{ row.paragraphNr }}</div>\\n                        <div ng-if=\"!$ctrl.isAlreadyChoosen(row)\"><strong>{{ row.paragraphNr }}</strong></div>\\n                    </button>\\n                </td>\\n                <td ng-if=\"!$ctrl.isRowEdited(row) && $ctrl.hasEditedRow()\">\\n                    {{ row.paragraphNr }}\\n                </td>\\n                <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                    <input id=\"rowParagraphNr\" type=\"number\" required class=\"form-control\" ng-model=\"row.paragraphNr\">\\n                    <div class=\"error\" ng-show=\"choicesTableForm.$invalid\">\\n                        {{ \\'Please fill the paragraph number\\' | translate }}\\n                    </div>\\n                </td>\\n\\n                <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                    {{ row.description }}\\n                </td>\\n                <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                    <input type=\"text\" class=\"form-control\" ng-model=\"row.description\">\\n                </td>\\n\\n                <td>\\n                    <button type=\"button\" class=\"btn btn-success\"\\n                            aria-label=\"{{ \\'Save choice changes\\' | translate}}\"\\n                            title=\"{{ \\'Save choice changes\\' | translate}}\"\\n                            ng-click=\"$ctrl.saveRowChanges(choicesTableForm.$invalid)\"\\n                            ng-show=\"$ctrl.isRowEdited(row)\">\\n                        <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>\\n                    </button>\\n                </td>\\n\\n                <td>\\n                    <button type=\"button\" class=\"btn btn-danger\"\\n                            aria-label=\"{{ \\'Abort choice changes\\' | translate}}\"\\n                            title=\"{{ \\'Abort choice changes\\' | translate}}\"\\n                            ng-click=\"$ctrl.abortRowChanges()\"\\n                            ng-show=\"$ctrl.isRowEdited(row)\">\\n                        <span class=\"glyphicon glyphicon-arrow-left\" aria-hidden=\"true\"></span>\\n                    </button>\\n                </td>\\n                <td>\\n                    <button type=\"button\" class=\"btn btn-default\"\\n                            aria-label=\"{{ \\'Edit choice\\' | translate}} {{ row.paragraphNr }}\"\\n                            title=\"{{ \\'Edit choice\\' | translate}} \\'{{ row.paragraphNr }}\\'\"\\n                            ng-click=\"$ctrl.editRow(row)\"\\n                            ng-show=\"!$ctrl.hasEditedRow()\">\\n                        <span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\"></span>\\n                    </button>\\n                    <button type=\"button\" class=\"btn btn-danger\"\\n                            aria-label=\"{{ \\'Remove choice\\' | translate}} {{ row.paragraphNr }}\"\\n                            title=\"{{ \\'Remove choice\\' | translate}} \\'{{ row.paragraphNr }}\\'\"\\n                            ng-click=\"$ctrl.displayRemovePopup(row)\"\\n                            ng-disabled=\"$ctrl.addedRow\"\\n                            ng-show=\"$ctrl.isRowEdited(row)\">\\n                        <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\\n                    </button>\\n                </td>\\n            </tr>\\n            <tr>\\n                <td>\\n                    <button type=\"button\" class=\"btn btn-default\"\\n                            aria-label=\"{{ \\'Go to paragraph\\' | translate}}\"\\n                            title=\"{{ \\'Go to paragraph\\' | translate}}\"\\n                            ng-click=\"$ctrl.goTo($ctrl.paragraphNrChoice)\"\\n                            ng-disabled=\"!$ctrl.paragraphNrChoice\">\\n                        {{ \\'Go to\\' | translate}}\\n                    </button>\\n                </td>\\n                <td>\\n                    <input id=\"goToParagraphNr\" type=\"number\" class=\"form-control\" ng-model=\"$ctrl.paragraphNrChoice\">\\n                </td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n            </tr>\\n\\n        </tbody>\\n    </table>\\n</form>\\n\\n<popup config=\"{{ $ctrl.popupDeleteChoiceConfig }}\"></popup>';\n},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o){n(this,e),t.intercept(),this.popupService=a,this.constants=r,this.gamePersistenceService=i,this.adventurePersistenceService=s,this.$location=o,this.popupDeleteChoiceConfig={id:\"popupDeleteChoice\",text:\"Are you sure to remove the choice?\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.initData()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"popupService\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\",\"$location\"],a(e,[{key:\"initData\",value:function(){var e=this.gamePersistenceService.getGame(this.gameId);this.adventureId=e.adventureId,this.playerName=e.playerName,this.descriptionEditable=!1,this.alreadyChoosen=this.gamePersistenceService.getChoosenChoices(this.gameId,this.paragraph.paragraphNr)}},{key:\"addRow\",value:function(){var e={paragraphNr:this.inputParagraphNr,description:this.inputDescription};this.paragraph.choices.push(e),this.inputParagraphNr=\"\",this.inputDescription=\"\",this.addedRow=e}},{key:\"displayRemovePopup\",value:function(e){this.rowToBeRemoved=e;var t=this;this.popupService.show(this.popupDeleteChoiceConfig.id,function(e,n){n===t.constants.choices.yes&&t.removeRow(t.rowToBeRemoved),t.rowToBeRemoved=null})}},{key:\"removeRow\",value:function(e){var t=this.paragraph.choices.indexOf(e);this.paragraph.choices.splice(t,1),this.clearEditedRow(),this.saveParagraphChoices()}},{key:\"editDescription\",value:function(){this.descriptionEditable=!0,this.originalDescription=this.paragraph.description}},{key:\"isDescriptionEditable\",value:function(){return this.descriptionEditable}},{key:\"saveDescriptionChanges\",value:function(){this.originalDescription=null,this.descriptionEditable=!1,this.adventurePersistenceService.updateParagraph(this.bookId,this.paragraph)}},{key:\"abortDescriptionChanges\",value:function(){this.paragraph.description=this.originalDescription,this.originalDescription=null,this.descriptionEditable=!1}},{key:\"editRow\",value:function(e){this.editedRow=e,this.originalRow={paragraphNr:e.paragraphNr,description:e.description}}},{key:\"isRowEdited\",value:function(e){return e===this.editedRow||e===this.addedRow}},{key:\"hasEditedRow\",value:function(){return!!this.editedRow||!!this.addedRow}},{key:\"saveRowChanges\",value:function(e){e||(this.clearEditedRow(),this.saveParagraphChoices())}},{key:\"saveParagraphChoices\",value:function(){this.adventurePersistenceService.updateParagraph(this.adventureId,this.paragraph)}},{key:\"abortRowChanges\",value:function(){this.addedRow&&this.removeRow(this.addedRow),this.editedRow&&(this.editedRow.paragraphNr=this.originalRow.paragraphNr,this.editedRow.description=this.originalRow.description),this.clearEditedRow()}},{key:\"clearEditedRow\",value:function(){this.addedRow=null,this.editedRow=null,this.originalRow=null}},{key:\"goTo\",value:function(e){this.gamePersistenceService.setCurrentParagraphNrOfGame(this.gameId,this.paragraph.paragraphNr,e);var t=this.gamePersistenceService.getUrlOfGame(this.gameId);this.$location.url(t)}},{key:\"isAlreadyChoosen\",value:function(e){return this.alreadyChoosen.indexOf(e.paragraphNr)!==-1}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(40),o=a(s),l=n(41),c=a(l),u=i[\"default\"].module(\"app.components.gui.components.back-button\",[]).component(\"backButton\",{template:o[\"default\"],controller:c[\"default\"]});t[\"default\"]=u},function(e,t){e.exports='<button type=\"button\"\\n        class=\"btn btn-default glyphicon glyphicon-circle-arrow-left\"\\n        aria-label=\"{{ \\'Back\\' | translate }}\"\\n        title=\"{{ \\'Back\\' | translate }}\"\\n        ng-click=\"$ctrl.back()\"\\n        ng-disabled=\"$ctrl.isBackDisabled()\">\\n    {{ \\'Back\\' | translate }}\\n</button>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.$window=t}return e.$inject=[\"$window\"],a(e,[{key:\"isBackDisabled\",value:function(){return this.$window.history.length<2}},{key:\"back\",value:function(){this.$window.history.back()}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(43),o=a(s),l=n(44),c=a(l),u=n(45),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.end-game-popup\",[]).component(\"endGamePopup\",{template:o[\"default\"],controller:c[\"default\"],bindings:{config:\"@\"}}).service(\"endGamePopupService\",d[\"default\"]);t[\"default\"]=p},function(e,t){e.exports='<div id=\"{{$ctrl.cfg.id}}\" class=\"modal\">\\n    <div class=\"modal-content\">\\n        <h1>{{ \\'Are you sure to abandon this game?\\' | translate }}</h1>\\n\\n        <div class=\"form-group\">\\n            <label for=\"endGameReason\">{{ \"End game\\'s reason\" | translate }}</label>\\n            <input type=\"text\" class=\"form-control\" id=\"endGameReason\" ng-model=\"$ctrl.endGameReason\">\\n        </div>\\n\\n        <span ng-repeat=\"choice in $ctrl.choices\">\\n            <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.select(choice)\">{{ choice | translate }}</button>&nbsp;\\n        </span>\\n    </div>\\n</div>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r){n(this,e),this.cfg=JSON.parse(this.config),this.constants=r,this.endGamePopupService=a,this.choices=[r.choices.yes,r.choices.no]}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"endGamePopupService\",\"constants\"],a(e,[{key:\"select\",value:function(e){this.close(e)}},{key:\"close\",value:function(e){this.endGamePopupService.close(this.cfg.id,e,this.endGameReason)}}]),e}();t[\"default\"]=r},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.constants=t,this.popups={}}return e.$inject=[\"constants\"],a(e,[{key:\"show\",value:function(e,t){var n=window.document.getElementById(e);n.style.display=\"block\",this.popups[e]=t}},{key:\"close\",value:function(e,t,n){var a=window.document.getElementById(e);a.style.display=\"none\";var r=this.popups[e];r&&t===this.constants.choices.yes&&r(e,n),delete this.popups[e]}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(47),o=a(s),l=n(48),c=a(l),u=n(49),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.export-data-popup\",[]).component(\"exportDataPopup\",{template:o[\"default\"],controller:c[\"default\"],bindings:{config:\"<\"}}).service(\"exportDataPopupService\",d[\"default\"]).constant(\"exportMethods\",{file:\"file\",text:\"text\",email:\"email\"});t[\"default\"]=p},function(e,t){e.exports='<form name=\"exportDataForm\" novalidate=\"novalidate\">\\n    <div id=\"{{$ctrl.config.id}}\" class=\"modal\">\\n        <div class=\"modal-content\">\\n            <h1>{{$ctrl.config.exportTitle}}</h1>\\n\\n            <div class=\"form-group\">\\n                <label for=\"exportMethod\">{{ \\'Select the export method\\' | translate }}</label>\\n                <select id=\"exportMethod\" class=\"form-control\" ng-model=\"$ctrl.exportMethod\">\\n                    <option ng-repeat=\"method in $ctrl.methods\" value=\"{{ method }}\">{{ \\'export_\\' + method | translate }}</option>\\n                </select>\\n            </div>\\n\\n            <div class=\"form-group\" ng-if=\"$ctrl.displayExportText()\">\\n                <label for=\"exportText\">{{ \"Export text\" | translate }}</label>\\n                <textarea class=\"form-control\" id=\"exportText\" rows=\"4\"ng-model=\"$ctrl.config.exportData\" required>\\n                </textarea>\\n            </div>\\n\\n            <div class=\"form-group\" ng-if=\"$ctrl.displayExportEmail()\">\\n                <label for=\"exportEmail\">{{ \"Receiver Email\" | translate }}</label>\\n                <input type=\"email\" class=\"form-control\" id=\"exportEmail\" ng-model=\"$ctrl.exportEmail\" required>\\n            </div>\\n\\n            <span ng-repeat=\"choice in $ctrl.choices\">\\n                <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.select(choice, exportDataForm)\">{{ choice | translate }}</button>&nbsp;\\n            </span>\\n\\n            <a id=\"linkSendEmail\" ng-show=\"false\" href=\"mailto:{{$ctrl.exportEmail}}?subject={{$ctrl.config.exportTitle}}&body={{$ctrl.config.exportData}}\">{{ \\'Sent\\' | translate }}</a>\\n            <a id=\"linkDownload\" ng-show=\"false\" ng-href=\"{{$ctrl.config.exportDownloadBlobUrl}}\" download=\"export.txt\">{{ \\'Download\\' | translate }}</a>\\n        </div>\\n    </div>\\n</form>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o){n(this,e),this.constants=r,this.exportDataPopupService=a,this.exportMethods=i,this.$window=s,this.formHelperService=o,this.choices=[r.choices.cancel,r.choices.ok],this.methods=[i.text,i.file,i.email],this.exportMethod=i.text}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"exportDataPopupService\",\"constants\",\"exportMethods\",\"$window\",\"formHelperService\"],a(e,[{key:\"select\",value:function(e,t){if(this.formHelperService.setErrorFieldsAsDirty(t,!1),!t.$invalid){if(e===this.constants.choices.ok)if(this.displayExportEmail()){var n=window.document.getElementById(\"linkSendEmail\");window.document.getElementById(\"exportDataForm\"),n.click()}else if(this.displayDownload()){var a=window.document.getElementById(\"linkDownload\");a.click()}this.close(e)}}},{key:\"close\",value:function(e){this.exportDataPopupService.close(this.config.id,e)}},{key:\"displayExportText\",value:function(){return!!this.exportMethod&&this.exportMethod===this.exportMethods.text}},{key:\"displayDownload\",value:function(){return!!this.exportMethod&&this.exportMethod===this.exportMethods.file}},{key:\"displayExportEmail\",value:function(){return!!this.exportMethod&&this.exportMethod===this.exportMethods.email}}]),e}();t[\"default\"]=r},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){n(this,e),this.constants=t,this.$window=a,this.popups={}}return e.$inject=[\"constants\",\"$window\"],a(e,[{key:\"show\",value:function(e,t){var n=window.document.getElementById(e);n.style.display=\"block\",this.popups[e]=t}},{key:\"createDownloadBlobUrl\",value:function(e){var t=new Blob([e],{type:\"text/plain\"}),n=this.$window.URL||this.$window.webkitURL;return n.createObjectURL(t)}},{key:\"close\",value:function(e,t,n){var a=window.document.getElementById(e);a.style.display=\"none\";var r=this.popups[e];r&&t===this.constants.choices.ok&&r(e,t),delete this.popups[e]}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(51),o=a(s),l=n(52),c=a(l),u=n(53),d=a(u),p=i[\"default\"].module(\"app.components.gui.components.import-data-popup\",[]).component(\"importDataPopup\",{template:o[\"default\"],controller:c[\"default\"],bindings:{config:\"<\"}}).service(\"importDataPopupService\",d[\"default\"]).constant(\"importMethods\",{file:\"file\",text:\"text\"});t[\"default\"]=p},function(e,t){e.exports='<form name=\"importDataForm\" novalidate=\"novalidate\">\\n    <div id=\"{{$ctrl.config.id}}\" class=\"modal\">\\n        <div class=\"modal-content\">\\n            <h1>{{$ctrl.config.title}}</h1>\\n\\n            <div class=\"form-group\">\\n                <label for=\"importMethod\">{{ \\'Select the import method\\' | translate }}</label>\\n                <select id=\"importMethod\" class=\"form-control\" ng-model=\"$ctrl.importMethod\">\\n                    <option ng-repeat=\"method in $ctrl.methods\" value=\"{{ method }}\">{{ \\'import_\\' + method | translate }}</option>\\n                </select>\\n            </div>\\n\\n            <div class=\"form-group\" ng-if=\"$ctrl.displayImportText()\">\\n                <label for=\"importText\">{{ \"Import text\" | translate }}</label>\\n                <textarea class=\"form-control\" id=\"importText\" rows=\"4\" ng-model=\"$ctrl.importTextData\" required>\\n                </textarea>\\n            </div>\\n\\n            <div class=\"form-group\" ng-if=\"$ctrl.displayUpload()\">\\n                <label for=\"importUpload\">{{ \"Import text\" | translate }}</label>\\n                <input id=\"importUpload\" type=\"file\" ng-model=\"$ctrl.uploadFile\" on-read-file=\"$ctrl.showContent($fileContent)\" />\\n            </div>\\n\\n            <span ng-repeat=\"choice in $ctrl.choices\">\\n                <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.select(choice, importDataForm)\">{{ choice | translate }}</button>&nbsp;\\n            </span>\\n        </div>\\n    </div>\\n</form>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o){n(this,e),this.constants=r,this.importDataPopupService=a,this.importMethods=i,this.$window=s,this.formHelperService=o,this.choices=[r.choices.cancel,r.choices.ok],this.methods=[i.text,i.file],this.importMethod=i.text}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"importDataPopupService\",\"constants\",\"importMethods\",\"$window\",\"formHelperService\"],a(e,[{key:\"select\",value:function(e,t){if(e===this.constants.choices.cancel)this.close(e);else if(e===this.constants.choices.ok&&(this.formHelperService.setErrorFieldsAsDirty(t,!1),!t.$invalid)){var n=null;this.importMethod===this.importMethods.text?n=this.importTextData:this.importMethod===this.importMethods.file&&(n=this.importUploadData),this.close(e,n),this.importTextData=null,this.importUploadData=null}}},{key:\"close\",value:function(e,t){this.importDataPopupService.close(this.config.id,e,t)}},{key:\"displayImportText\",value:function(){return!!this.importMethod&&this.importMethod===this.importMethods.text}},{key:\"displayUpload\",value:function(){return!!this.importMethod&&this.importMethod===this.importMethods.file}},{key:\"showContent\",value:function(e){this.importUploadData=e}}]),e}();t[\"default\"]=r},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.constants=t,this.popups={}}return e.$inject=[\"constants\"],a(e,[{key:\"show\",value:function(e,t){var n=window.document.getElementById(e);n.style.display=\"block\",this.popups[e]=t}},{key:\"close\",value:function(e,t,n){var a=window.document.getElementById(e);a.style.display=\"none\";var r=this.popups[e];r&&t===this.constants.choices.ok&&r(e,n),delete this.popups[e]}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(55),o=a(s),l=n(58),c=a(l),u=n(78),d=a(u),p=n(81),h=a(p),f=n(84),v=a(f),g=n(87),m=a(g),b=n(90),y=a(b),w=n(97),S=a(w),P=i[\"default\"].module(\"app.components.gui.screens\",[o[\"default\"].name,c[\"default\"].name,d[\"default\"].name,h[\"default\"].name,v[\"default\"].name,m[\"default\"].name,y[\"default\"].name,S[\"default\"].name]);t[\"default\"]=P},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(56),c=a(l),u=n(57),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.home\",[o[\"default\"],\"app.components.constants\"]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"home\",{url:n.url.root,template:\"<home></home>\"})}]).component(\"home\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports=\"<navbar></navbar>\\n<messages></messages>\\n<main>\\n</main>\"},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=[\"$location\",\"preScreenLoadingInterceptorsCallerService\",\"constants\",function r(e,t,a){n(this,r),t.intercept(),e.url(a.url.games)}];t[\"default\"]=a},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(59),o=a(s),l=n(62),c=a(l),u=n(68),d=a(u),p=i[\"default\"].module(\"app.components.gui.screens.games\",[o[\"default\"].name,c[\"default\"].name,d[\"default\"].name]);t[\"default\"]=p},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(60),c=a(l),u=n(61),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.games.list\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"gamesList\",{url:n.url.games,template:\"<games-list></games-list>\"})}]).component(\"gamesList\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'Games\\' | translate }}</h1>\\n        </div>\\n        <div class=\"row\">\\n            <div class=\"col-md-12\">\\n                <table class=\"table table-striped\">\\n                    <col style=\"width:25%\">\\n                    <col style=\"width:20% \">\\n                    <col style=\"width:15% \">\\n                    <col style=\"width:20%\">\\n                    <col style=\"width:15%\">\\n                    <col style=\"width:5%\">\\n                    <thead>\\n                    <tr>\\n                        <th>{{ \\'Adventure\\' | translate }}</th>\\n                        <th>{{ \\'Serie\\' | translate }}</th>\\n                        <th>{{ \\'Player\\' | translate }}</th>\\n                        <th>{{ \\'State\\' | translate }}</th>\\n                        <th>{{ \\'Paragraph\\' | translate }}</th>\\n                        <th>{{ \\'Selection\\' | translate }}</th>\\n                    </tr>\\n                    </thead>\\n                    <tbody>\\n                    <tr ng-repeat=\"row in $ctrl.rows\">\\n                        <td>{{ row.adventureName }}</td>\\n                        <td>{{ row.serie }}</td>\\n                        <td>{{ row.playerName }}</td>\\n                        <td>{{ (!!row.endGameReason ? \\'game over\\' : \\'in progress\\') | translate }}\\n                            {{ (!!row.endGameReason ? \": \\'\" + row.endGameReason + \"\\'\" : \\'\\' ) }}\\n                        </td>\\n                        <td>{{ row.currentParagraphNr }}</td>\\n                        <td>\\n                            <button type=\"button\" class=\"btn\" ng-class=\"{ \\'btn-success\\' : row.selected, \\'btn-default\\' : !row.selected}\"\\n                                    aria-label=\"{{ !row.selected ?\\n                                        (\\'ChoiceGame\\' | translate: {adventureName: row.adventureName, playerName: row.playerName}) :\\n                                        (\\'ChoosenGame\\' | translate: {adventureName: row.adventurekName, playerName: row.playerName}) }}\"\\n                                    title=\"{{ !row.selected ?\\n                                        (\\'ChoiceGame\\' | translate: {adventureName: row.adventureName, playerName: row.playerName}) :\\n                                        (\\'ChoosenGame\\' | translate: {adventureName: row.adventureName, playerName: row.playerName}) }}\"\\n                                    ng-click=\"$ctrl.select(row)\">\\n                                <span ng-class=\"{ \\'glyphicon glyphicon-ok\\' : row.selected, \\'glyphicon glyphicon-hand-left\\' : !row.selected}\" aria-hidden=\"true\"></span>\\n                            </button>\\n                        </td>\\n                    </tr>\\n                    </tbody>\\n                </table>\\n            </div>\\n        </div>\\n\\n        <back-button></back-button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                ng-click=\"$ctrl.startNewGame()\"\\n                aria-label=\"{{ \\'Start a new game\\' | translate }}\"\\n                title=\"{{ \\'Start a new game\\' | translate }}\">{{ \\'New game\\' | translate }}\\n        </button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Import an adventure\\' | translate }}\"\\n                title=\"{{ \\'Import an adventure\\' | translate }}\"\\n                ng-click=\"$ctrl.displayImportGamePopup()\">{{ \\'Import\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                ng-click=\"$ctrl.continueGame()\"\\n                aria-label=\"{{ \\'Continue the selected game\\' | translate }}\"\\n                title=\"{{ \\'Continue the selected game\\' | translate }}\">{{ \\'Continue\\' | translate }}\\n        </button>\\n        <button type=\"button\" class=\"btn btn-danger\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                ng-click=\"$ctrl.displayRemoveGamePopup()\"\\n                aria-label=\"{{ \\'Remove the selected game\\' | translate }}\"\\n                title=\"{{ \\'Remove the selected game\\' | translate }}\">{{ \\'Remove\\' | translate }}\\n        </button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                ng-click=\"$ctrl.displayExportGamePopup()\"\\n                aria-label=\"{{ \\'Export selected adventure\\' | translate }}\"\\n                title=\"{{ \\'Export selected adventure\\' | translate }}\">{{ \\'Export\\' | translate }}</button>\\n    </div>\\n</main>\\n\\n<popup config=\"{{ $ctrl.popupDeleteGameConfig }}\"></popup>\\n<export-data-popup config=\"$ctrl.popupExportGameConfig\"></export-data-popup>\\n<import-data-popup config=\"$ctrl.popupImportGameConfig\"></import-data-popup>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c,u,d){n(this,e),this.constants=r,a.intercept(),this.$location=t,this.gamePersistenceService=i,this.adventurePersistenceService=s,this.messagesService=o,this.$translate=l,this.popupService=c,this.exportDataPopupService=u,this.importDataPopupService=d,this.popupDeleteGameConfig={id:\"popupDeleteGame\",text:\"Are you sure to remove the selected game?\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.popupExportGameConfig={id:\"popupExportGame\"},this.popupImportGameConfig={id:\"popupImportGame\"},this.initData()}return e.$inject=[\"$location\",\"preScreenLoadingInterceptorsCallerService\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\",\"messagesService\",\"$translate\",\"popupService\",\"exportDataPopupService\",\"importDataPopupService\"],a(e,[{key:\"initData\",value:function(){var e=this.gamePersistenceService.getGamePersistenceKeys();this.rows=[];for(var t=0;t<e.length;t++){var n=this.gamePersistenceService.getGame(e[t]);this.rows.push(n)}this.completeAdventureData(this.rows)}},{key:\"completeAdventureData\",value:function(e){for(var t=0;t<e.length;t++){var n=this.adventurePersistenceService.getAdventure(e[t].adventureId);n?(e[t].adventureName=n.name,e[t].serie=n.serie):(this.messagesService.errorMessage(this.$translate.instant(\"Cannot find adventure\")+\" '\"+e[t].adventureId+\"'\",!1),e[t].adventureName=e[t].adventureId)}}},{key:\"select\",value:function(e){for(var t=0;t<this.rows.length;t++)this.rows[t].selected=!1;e.selected=!0}},{key:\"startNewGame\",value:function(){var e=this.adventurePersistenceService.getAdventurePersistenceKeys();return e&&0!==e.length?void this.$location.url(this.constants.url.selectAdventureForNewGame):void this.messagesService.errorMessage(\"No adventure available\",!1)}},{key:\"continueGame\",value:function(){var e=this.gamePersistenceService.getGame(this.getSelectedRow().id),t=this.adventurePersistenceService.getAdventure(e.adventureId);if(t){var n=this.gamePersistenceService.getUrlOfGame(this.getSelectedRow().id);this.$location.url(n)}else this.messagesService.errorMessage(\"The adventure is not available\",!1)}},{key:\"displayRemoveGamePopup\",value:function(){var e=this;this.popupService.show(this.popupDeleteGameConfig.id,function(t,n){n===e.constants.choices.yes&&e.deleteGame()})}},{key:\"deleteGame\",value:function(){this.gamePersistenceService.deleteGame(this.getSelectedRow().id,!0,!0),this.initData()}},{key:\"displayExportGamePopup\",value:function(){this.popupExportGameConfig.exportData=JSON.stringify(this.gamePersistenceService.getGame(this.getSelectedRow().id)),this.popupExportGameConfig.exportDownloadBlobUrl=this.exportDataPopupService.createDownloadBlobUrl(this.popupExportGameConfig.exportData),this.popupExportGameConfig.exportTitle=this.$translate.instant(\"ExportGame\",{playerName:this.getSelectedRow().playerName,adventureName:this.getSelectedRow().adventureName}),this.exportDataPopupService.show(this.popupExportGameConfig.id)}},{key:\"displayImportGamePopup\",value:function(){var e=this;this.popupImportGameConfig.title=this.$translate.instant(\"Import a game\"),this.importDataPopupService.show(this.popupImportGameConfig.id,function(t,n){e.gamePersistenceService.importGame(n),e.initData()})}},{key:\"hasSelectedRow\",value:function(){return!!this.getSelectedRow()}},{key:\"getSelectedRow\",value:function(){for(var e=0;e<this.rows.length;e++)if(this.rows[e].selected)return this.rows[e];return null}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(63),c=a(l),u=n(66),d=a(u),p=n(67),h=a(p),f=i[\"default\"].module(\"app.components.gui.screen.games.detail\",[o[\"default\"],c[\"default\"].name]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"game-detail\",{url:n.url.gameDetail,template:\"<game-detail></game-detail>\"})}]).component(\"gameDetail\",{template:d[\"default\"],controller:h[\"default\"]});t[\"default\"]=f},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(64),o=a(s),l=n(65),c=a(l),u=i[\"default\"].module(\"app.components.gui.screen.games.detail.notes\",[]).component(\"notes\",{template:o[\"default\"],controller:c[\"default\"],bindings:{gameId:\"@\",paragraphNr:\"@\",adventureId:\"@\"}});t[\"default\"]=u},function(e,t){e.exports='<form name=\"notesTableForm\" novalidate=\"novalidate\">\\n    <table class=\"table table-striped\">\\n        <col style=\"width:75%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:10%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <col style=\"width:5%\">\\n        <thead>\\n        <tr>\\n            <th>{{ \\'Note\\' | translate }}</th>\\n            <th>{{ \\'Paragraph\\' | translate }}</th>\\n            <th>{{ \\'Player\\' | translate }}</th>\\n            <th></th>\\n            <th></th>\\n            <th>\\n                <button type=\"button\" class=\"btn btn-default\"\\n                        aria-label=\"{{ \\'Add note\\' | translate}}\"\\n                        title=\"{{ \\'Add note\\' | translate}}\"\\n                        ng-click=\"$ctrl.addRow()\"\\n                        ng-show=\"!$ctrl.hasEditedRow()\">\\n                    <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n                </button>\\n            </th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\"row in $ctrl.notes track by $index\">\\n            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                {{ row.note }}\\n            </td>\\n            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                <input required type=\"text\" class=\"form-control\" ng-model=\"row.note\">\\n                <div class=\"error\" ng-show=\"notesTableForm.$invalid\">\\n                    {{ \\'Please fill the note\\' | translate }}\\n                </div>\\n            </td>\\n\\n            <td ng-if=\"!$ctrl.isRowEdited(row) || !$ctrl.gameId || !row.playerName\">\\n                {{ row.paragraphNr }}\\n            </td>\\n            <td ng-if=\"$ctrl.isRowEdited(row) && (!!$ctrl.gameId && !!row.playerName)\">\\n                <input type=\"checkbox\" class=\"form-control\" ng-model=\"row.isParagraph\" name=\"isParagraph\" value=\"true\"><br>\\n            </td>\\n\\n            <td>\\n                {{ row.playerName }}\\n            </td>\\n\\n            <td>\\n                <button type=\"button\" class=\"btn btn-success\"\\n                        aria-label=\"{{ \\'Save note changes\\' | translate}}\"\\n                        title=\"{{ \\'Save note changes\\' | translate}}\"\\n                        ng-click=\"$ctrl.saveRowChanges(notesTableForm.$invalid, row)\"\\n                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                    <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>\\n                </button>\\n            </td>\\n\\n            <td>\\n                <button type=\"button\" class=\"btn btn-danger\"\\n                        aria-label=\"{{ \\'Abort note changes\\' | translate}}\"\\n                        title=\"{{ \\'Abort note changes\\' | translate}}\"\\n                        ng-click=\"$ctrl.abortRowChanges()\"\\n                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                    <span class=\"glyphicon glyphicon-arrow-left\" aria-hidden=\"true\"></span>\\n                </button>\\n            </td>\\n\\n            <td>\\n                <button type=\"button\" class=\"btn btn-default\"\\n                        aria-label=\"{{ \\'Edit note\\' | translate}} \\'{{ row.note | translate }}\\'\"\\n                        title=\"{{ \\'Edit note\\' | translate}} \\'{{ row.note | translate }}\\'\"\\n                        ng-click=\"$ctrl.editRow(row)\"\\n                        ng-show=\"!$ctrl.hasEditedRow()\">\\n                    <span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\"></span>\\n                </button>\\n                <button type=\"button\" class=\"btn btn-danger\"\\n                        aria-label=\"{{ \\'Remove note\\' | translate }} \\'{{ row.note | translate }}\\'\"\\n                        title=\"{{ \\'Remove note\\' | translate }} \\'{{ row.note | translate }}\\'\"\\n                        ng-click=\"$ctrl.displayRemovePopup(row)\"\\n                        ng-disabled=\"$ctrl.addedRow\"\\n                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                    <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\\n                </button>\\n            </td>\\n        </tr>\\n        </tbody>\\n    </table>\\n</form>\\n<popup config=\"{{ $ctrl.popupDeleteNoteConfig }}\"></popup>\\n';\n},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s){n(this,e),t.intercept(),this.popupService=a,this.constants=r,this.gamePersistenceService=i,this.adventurePersistenceService=s,this.popupDeleteNoteConfig={id:\"popupDeleteNoteConfig\",text:\"Are you sure to remove the note?\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.initData()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"popupService\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\"],a(e,[{key:\"initData\",value:function(){var e=void 0;this.gameId&&(e=this.gamePersistenceService.getGame(this.gameId)),this.notes=[];var t=this.adventurePersistenceService.getParagraph(this.adventureId,this.paragraphNr);if(t&&t.notes)for(var n=0;n<t.notes.length;n++)this.notes.push(t.notes[n]),t.notes[n].paragraphNr=this.paragraphNr,t.notes[n].isParagraph=!!t.notes[n].paragraphNr,t.notes[n].playerName||(t.notes[n].note=t.notes[n].note);e&&(this.playerName=e.playerName,e.notes&&(this.notes=this.notes.concat(e.notes)))}},{key:\"addRow\",value:function(e){var t={note:e,isParagraph:!0,paragraphNr:this.paragraphNr,playerName:this.playerName};this.notes.push(t),this.addedRow=t}},{key:\"displayRemovePopup\",value:function(e){this.rowToBeRemoved=e;var t=this;this.popupService.show(this.popupDeleteNoteConfig.id,function(e,n){n===t.constants.choices.yes&&t.removeRow(t.rowToBeRemoved),t.rowToBeRemoved=null})}},{key:\"removeRow\",value:function(e){var t=this.notes.indexOf(e);this.notes.splice(t,1),this.clearEditedRow(),this.saveNotes()}},{key:\"editRow\",value:function(e){this.editedRow=e,this.originalRow={note:e.note,paragraphNr:e.paragraphNr,playerName:e.playerName}}},{key:\"isRowEdited\",value:function(e){return e===this.editedRow||e===this.addedRow}},{key:\"hasEditedRow\",value:function(){return!!this.editedRow||!!this.addedRow}},{key:\"saveRowChanges\",value:function(e,t){e||(t.isParagraph?t.paragraphNr=Number(this.paragraphNr):t.paragraphNr=void 0,this.clearEditedRow(),this.saveNotes())}},{key:\"saveNotes\",value:function(){this.savePlayerNotes(),this.saveParagraphNotes()}},{key:\"savePlayerNotes\",value:function(){if(this.gameId){for(var e=[],t=0;t<this.notes.length;t++)this.notes[t].paragraphNr||e.push({note:this.notes[t].note,playerName:this.notes[t].playerName});var n=this.gamePersistenceService.getGame(this.gameId);n.notes=e,this.gamePersistenceService.updateGame(n)}}},{key:\"saveParagraphNotes\",value:function(){for(var e=[],t=0;t<this.notes.length;t++)this.notes[t].paragraphNr&&e.push({note:this.notes[t].note,playerName:this.notes[t].playerName});var n=this.adventurePersistenceService.getParagraph(this.adventureId,this.paragraphNr);n.notes=e,this.adventurePersistenceService.updateParagraph(this.adventureId,n)}},{key:\"abortRowChanges\",value:function(){this.addedRow&&this.removeRow(this.addedRow),this.editedRow&&(this.editedRow.note=this.originalRow.note,this.editedRow.paragraphNr=this.originalRow.paragraphNr,this.editedRow.playerName=this.originalRow.playerName),this.clearEditedRow()}},{key:\"clearEditedRow\",value:function(){this.addedRow=null,this.editedRow=null,this.originalRow=null}}]),e}();t[\"default\"]=r},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'Paragraph\\' | translate }} {{ $ctrl.paragraph.paragraphNr }}</h1>\\n        </div>\\n\\n        <div id=\"paragraphEdit\">\\n            <paragraph paragraph=\"$ctrl.paragraph\" game-id=\"{{$ctrl.game.id}}\"></paragraph>\\n            <notes adventure-id=\"{{$ctrl.adventureId}}\" paragraph-nr=\"{{$ctrl.paragraph.paragraphNr}}\" game-id=\"{{$ctrl.game.id}}\"></notes>\\n        </div>\\n\\n        <div id=\"playerSheet\" ng-if=\"!!$ctrl.playerName\">\\n            <h2>{{ \\'Player\\' | translate }} {{ $ctrl.playerName }}</h2>\\n            <stats game-id=\"{{$ctrl.game.id}}\" stats=\"$ctrl.stats\"></stats>\\n            <items game-id=\"{{$ctrl.game.id}}\" items=\"$ctrl.items\"></items>\\n            <dices></dices>\\n            <back-button></back-button>\\n            <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.startBattle()\">{{ \\'Start Battle\\' | translate }}</button>\\n            <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.displayAbandonGamePopup()\">{{ \\'End Game\\' | translate }}</button>\\n        </div>\\n    </div>\\n\\n    <end-game-popup config=\"{{ $ctrl.popupAbandonGameConfig }}\"></end-game-popup>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c,u){n(this,e),t.intercept(),this.$location=a,this.constants=r,this.endGamePopupService=i,this.$stateParams=s,this.gamePersistenceService=o,this.adventurePersistenceService=l,this.$translate=c,this.messagesService=u,this.items=[],this.stats=[],this.game=this.gamePersistenceService.getGame(decodeURIComponent(this.$stateParams.gameId)),this.playerName=this.game.playerName,this.game.items&&(this.items=this.items.concat(this.game.items)),this.game.stats&&(this.stats=this.stats.concat(this.game.stats)),this.adventureId=this.$stateParams.adventureId,this.paragraph=this.adventurePersistenceService.getOrCreateParagraph(this.adventureId,this.$stateParams.paragraphNr),this.popupAbandonGameConfig={id:\"popupAbandonGame\"},this.checkAvailableAdventure()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"$location\",\"constants\",\"endGamePopupService\",\"$stateParams\",\"gamePersistenceService\",\"adventurePersistenceService\",\"$translate\",\"messagesService\"],a(e,[{key:\"checkAvailableAdventure\",value:function(){var e=this.adventurePersistenceService.getAdventure(this.adventureId);e||this.messagesService.errorMessage(\"The adventure is not available\",!1)}},{key:\"startBattle\",value:function(){this.$location.url(this.constants.url.battle+\"/\"+this.game.id)}},{key:\"displayAbandonGamePopup\",value:function(e){var t=this;this.endGamePopupService.show(this.popupAbandonGameConfig.id,function(e,n){var a=t.gamePersistenceService.getGame(t.game.id);a.endGameReason=n,t.gamePersistenceService.updateGame(a),t.$location.url(t.constants.url.games)})}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(69),o=a(s),l=n(72),c=a(l),u=n(75),d=a(u),p=i[\"default\"].module(\"app.components.gui.screens.games.create\",[o[\"default\"].name,c[\"default\"].name,d[\"default\"].name]);t[\"default\"]=p},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(70),c=a(l),u=n(71),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.games.create.select-adventure\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"select-adventure\",{url:n.url.selectAdventureForNewGame,template:\"<select-adventure></select-adventure>\"})}]).component(\"selectAdventure\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <form ng-submit=\"$ctrl.next()\">\\n            <div class=\"page-header\">\\n                <h1>{{ \\'New game\\' | translate }}</h1>\\n            </div>\\n\\n            <ol class=\"breadcrumb\">\\n                <li class=\"active\">{{ \\'Select Adventure\\' | translate }}</li>\\n                <li>{{ \\'Create Player\\' | translate }}</li>\\n                <li>{{ \\'Choose Items\\' | translate }}</li>\\n            </ol>\\n\\n            <div class=\"form-group\">\\n                <label for=\"selectedAdventure\">{{ \\'Select an adventure\\' | translate }}</label>\\n                <select id=\"selectedAdventure\" class=\"form-control\" ng-model=\"$ctrl.selectedAdventureId\">\\n                    <option ng-repeat=\"adventure in $ctrl.adventures\" value=\"{{ adventure.id }}\">{{ adventure.name }}</option>\\n                </select>\\n            </div>\\n\\n            <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.back()\">{{ \\'Back\\' | translate }}</button>\\n            <button type=\"button\" class=\"btn btn-primary\" ng-click=\"$ctrl.next()\">{{ \\'Next\\' | translate }}</button>\\n        </form>\\n    </div>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o){n(this,e),t.intercept(),this.$location=r,this.$window=i,this.constants=a,this.adventurePersistenceService=s,this.$timeout=o,this.initData(),this.setInitialFocus()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"constants\",\"$location\",\"$window\",\"adventurePersistenceService\",\"$timeout\"],a(e,[{key:\"initData\",value:function(){var e=this.adventurePersistenceService.getAdventurePersistenceKeys();this.adventures=[];for(var t=0;t<e.length;t++){var n=this.adventurePersistenceService.getAdventure(e[t]);this.adventures.push(n)}this.selectedAdventureId=this.adventures[0].id}},{key:\"setInitialFocus\",value:function(){var e=this;this.$timeout(function(){var t=e.$window.document.getElementById(\"selectedAdventure\");t&&t.focus()})}},{key:\"back\",value:function(){this.$window.history.back()}},{key:\"next\",value:function(){this.$location.url(this.constants.url.createPlayerForNewGame+\"?adventureId=\"+encodeURIComponent(this.selectedAdventureId))}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(73),c=a(l),u=n(74),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.games.create.create-player\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"create-player\",{url:n.url.createPlayerForNewGame+\"?adventureId\",template:\"<create-player></create-player>\"})}]).component(\"createPlayer\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'New game\\' | translate }}</h1>\\n        </div>\\n\\n        <!-- novalidate=\"novalidate\" allow to do not display untranslated tooltip \"Fill out this field\" -->\\n        <form name=\"playerForm\" novalidate=\"novalidate\" ng-submit=\"$ctrl.next(playerForm.$invalid)\">\\n            <ol class=\"breadcrumb\">\\n                <li>{{ \\'Select Adventure\\' | translate }}</li>\\n                <li class=\"active\">{{ \\'Create Player\\' | translate }}</li>\\n                <li>{{ \\'Choose Items\\' | translate }}</li>\\n            </ol>\\n\\n            <div class=\"form-group\">\\n                <label for=\"playerName\">{{ \\'PlayerName\\' | translate }}*</label>\\n                <input type=\"text\" required class=\"form-control\" id=\"playerName\" ng-model=\"$ctrl.playerName\">\\n                <div class=\"error\" ng-show=\"playerForm.$invalid\">\\n                    {{ \\'Please fill the player name\\' | translate }}\\n                </div>\\n            </div>\\n\\n            <div class=\"form-group\" ng-repeat=\"stats in $ctrl.stats\">\\n                <label for=\"{{ stats.name }}\">{{ stats.name }}</label>\\n                <input type=\"text\" disabled required class=\"form-control\" id=\"{{ stats.name }}\" ng-model=\"stats.value\">\\n            </div>\\n\\n            <div class=\"form-group\">\\n                <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.back()\">{{ \\'Back\\' | translate }}</button>\\n                <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.generateStats()\">{{ \\'Random Stats\\' | translate }}</button>\\n                <button type=\"button\" class=\"btn btn-primary\" ng-click=\"$ctrl.next(playerForm.$invalid)\">{{ \\'Next\\' | translate }}</button>\\n            </div>\\n        </form>\\n    </div>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c){n(this,e),t.intercept(),this.constants=s,this.$window=r,this.$location=i,this.dicesService=o,this.$timeout=c,this.adventure=l.getAdventure(a.adventureId),this.loadData(this.adventure),this.generateStats(),this.setInitialFocus()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"$stateParams\",\"$window\",\"$location\",\"constants\",\"dicesService\",\"adventurePersistenceService\",\"$timeout\"],a(e,[{key:\"loadData\",value:function(e){var t=this;this.stats=[];var n=this;if(e.stats)for(var a=function(a){var r=e.stats[a];t.stats.push({name:r.name,generate:function(){return r.init.constant+n.dicesService.rollDices(r.init.sixDiceQuantity,6)}})},r=0;r<e.stats.length;r++)a(r)}},{key:\"generateStats\",value:function(){for(var e=0;e<this.stats.length;e++){var t=this.stats[e];t.value=t.generate()}}},{key:\"setInitialFocus\",value:function(){var e=this;this.$timeout(function(){var t=e.$window.document.getElementById(\"playerName\");t&&t.focus()})}},{key:\"back\",value:function(){this.$window.history.back()}},{key:\"next\",value:function(e){if(!e){for(var t=this.constants.url.chooseItemsForNewGame+\"?adventureId=\"+encodeURIComponent(this.adventure.id)+\"&playerName=\"+encodeURIComponent(this.playerName),n=\"\",a=0;a<this.stats.length;a++){var r=this.stats[a];n=n+encodeURIComponent(r.name)+encodeURIComponent(r.value)+\",\"}t=t+\"&stats=\"+n,this.$location.url(t)}}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(76),c=a(l),u=n(77),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.games.create.choose-items\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"choose-items\",{url:n.url.chooseItemsForNewGame+\"?adventureId&playerName&stats\",template:\"<choose-items></choose-items>\"})}]).component(\"chooseItems\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <form ng-submit=\"$ctrl.startGame()\">\\n            <div class=\"page-header\">\\n                <h1>{{ \\'New game\\' | translate }}</h1>\\n            </div>\\n\\n            <ol class=\"breadcrumb\">\\n                <li>{{ \\'Select Adventure\\' | translate }}</li>\\n                <li>{{ \\'Create Player\\' | translate }}</li>\\n                <li class=\"active\">{{ \\'Choose Items\\' | translate }}</li>\\n            </ol>\\n\\n            <messages></messages>\\n\\n            <items ng-if=\"$ctrl.isItemsDisplayed()\" items=\"$ctrl.getItems()\"></items>\\n\\n            <div class=\"spacer\"></div>\\n\\n            <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.back()\">{{ \\'Back\\' | translate }}</button>\\n            <button type=\"button\" class=\"btn btn-primary\" ng-click=\"$ctrl.startGame()\">{{ \\'Start Game\\' | translate }}</button>\\n        </form>\\n    </div>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c){if(n(this,e),t.intercept(),this.messagesService=r,this.adventurePersistenceService=c,this.gamePersistenceService=l,this.$window=i,this.$stateParams=a,this.$location=s,this.constants=o,this.adventure=c.getAdventure(a.adventureId),this.adventure.items){this.playerItems=this.adventure.items;for(var u=0;u<this.playerItems.length;u++)this.playerItems[u].description=this.playerItems[u].description}else this.playerItems=[];this.displayNotes()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"$stateParams\",\"messagesService\",\"$window\",\"$location\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\"],a(e,[{key:\"isItemsDisplayed\",value:function(){return!!this.adventure.items&&this.adventure.items.length>0}},{key:\"displayNotes\",value:function(){this.adventure.startGameNote&&this.messagesService.infoMessage(this.adventure.startGameNote,!1)}},{key:\"getItems\",value:function(){return this.playerItems}},{key:\"startGame\",value:function(){var e=this.buildGame();e=this.gamePersistenceService.addGame(e),this.gamePersistenceService.setCurrentParagraphNrOfGame(e.id,null,this.adventure.startParagraphNr),this.$location.url(this.gamePersistenceService.getUrlOfGame(e.id))}},{key:\"buildGame\",value:function(){var e={playerName:this.$stateParams.playerName,adventureId:this.adventure.id,items:JSON.parse(JSON.stringify(this.playerItems))};return e.stats=this.getStatsInUrlParam(),e}},{key:\"getStatsInUrlParam\",value:function(){var e=this.$stateParams.stats,t=[];if(this.adventure.stats)for(var n=0;n<this.adventure.stats.length;n++){var a=this.adventure.stats[n],r=e.indexOf(a.name);r+=a.name.length;var i=e.indexOf(\",\",r),s=e.substring(r,i);t.push({name:a.name,value:new Number(s)})}return t}},{key:\"back\",value:function(){this.$window.history.back()}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(79),c=a(l),u=n(80),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.battle\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"battle\",{url:n.url.battle+\"/{game}\",template:\"<battle></battle>\"})}]).component(\"battle\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'Battle\\' | translate }}</h1>\\n        </div>\\n\\n        <form name=\"battleTableForm\" novalidate=\"novalidate\">\\n            <table class=\"table\">\\n                <col style=\"width:20%\">\\n                <col style=\"width:10%\" ng-repeat=\"row in $ctrl.stats\">\\n                <col style=\"width:{{ $ctrl.lastColumnSizeInPercent() }}%\">\\n                <col style=\"width:5%\">\\n                <thead>\\n                <tr>\\n                    <th></th>\\n                    <th ng-repeat=\"row in $ctrl.stats\">{{ row.name | translate }}</th>\\n                    <th></th>\\n                    <th>\\n                        <button type=\"button\" class=\"btn btn-default\"\\n                                aria-label=\"{{ \\'Add enemy\\' | translate}}\"\\n                                title=\"{{ \\'Add enemy\\' | translate}}\"\\n                                ng-click=\"$ctrl.addEnemy()\">\\n                            <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n                        </button>\\n                    </th>\\n                </tr>\\n                </thead>\\n                <tbody>\\n                <tr ng-repeat=\"row in $ctrl.rows\">\\n                    <td ng-if=\"!$ctrl.isEnemy(row)\">\\n                        {{ row.name }}\\n                    </td>\\n                    <td ng-if=\"$ctrl.isEnemy(row)\">\\n                        <input required type=\"text\" class=\"form-control\" ng-model=\"row.name\">\\n                        <div class=\"error\" ng-show=\"!row.name\">\\n                            {{ \\'Please fill the name\\' | translate }}\\n                        </div>\\n                    </td>\\n\\n                    <td ng-repeat=\"stats in $ctrl.stats\">\\n                        <div ng-if=\"!stats.editableForEnemy && !!$ctrl.isEnemy(row)\">\\n                            {{ row[stats.name] }}\\n                        </div>\\n\\n                        <div ng-if=\"!!stats.editableForEnemy || !$ctrl.isEnemy(row)\">\\n                            <input required type=\"number\" class=\"form-control\" ng-model=\"row[stats.name]\" ng-change=\"$ctrl.save()\">\\n                            <div class=\"error\" ng-show=\"!row[stats.name]\">\\n                                {{ \\'Please fill a value\\' | translate }}\\n                            </div>\\n                        </div>\\n                    </td>\\n\\n                    <td></td>\\n\\n                    <td>\\n                        <button type=\"button\" class=\"btn btn-danger\"\\n                                aria-label=\"{{ \\'Remove enemy\\' | translate }} {{ row.name | translate }}\"\\n                                title=\"{{ \\'Remove enemy\\' | translate }} \\'{{ row.name | translate }}\\'\"\\n                                ng-click=\"$ctrl.displayRemovePopup(row)\"\\n                                ng-show=\"$ctrl.isEnemy(row)\">\\n                            <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\\n                        </button>\\n                    </td>\\n                </tr>\\n                </tbody>\\n            </table>\\n        </form>\\n\\n        <dices></dices>\\n        <back-button></back-button>\\n\\n        <popup config=\"{{ $ctrl.popupDeleteEnemyConfig }}\"></popup>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l){n(this,e),t.intercept(),this.$window=a,this.popupService=r,this.constants=i,this.$stateParams=l,this.gamePersistenceService=s,this.adventurePersistenceService=o,this.popupDeleteEnemyConfig={id:\"popupDeleteEnemy\",text:\"Are you sure to remove the enemy?\",choices:[i.choices.yes,i.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.initData()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"$window\",\"popupService\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\",\"$stateParams\"],a(e,[{key:\"initData\",value:function(){this.$stateParams.game&&(this.game=this.gamePersistenceService.getGame(decodeURIComponent(this.$stateParams.game)),this.adventure=this.adventurePersistenceService.getAdventure(this.game.adventureId)),this.initStatsData(),this.initPlayerStats(),this.defaultEnemy=this.initDefaultEnemy(),this.addEnemy()}},{key:\"initStatsData\",value:function(){if(this.game&&this.adventure){this.stats=[];for(var e=0;e<this.adventure.stats.length;e++){var t=this.adventure.stats[e];t.battle&&t.battle.displayed&&this.stats.push({name:t.name,enemyDefaultValue:t.battle.enemyDefaultValue,editableForEnemy:t.battle.editableForEnemy})}}}},{key:\"initPlayerStats\",value:function(){if(this.stats){this.statsPlayer={name:this.game.playerName};for(var e=0;e<this.stats.length;e++)for(var t=this.stats[e],n=0;n<this.game.stats.length;n++){var a=this.game.stats[n];if(t.name===a.name){this.statsPlayer[t.name]=a.current;break}}this.rows=[this.statsPlayer]}}},{key:\"initDefaultEnemy\",value:function(){var e=\"Enemy\";this.adventure.defaultEnemyName&&(e=this.adventure.defaultEnemyName);for(var t={name:e},n=0;n<this.stats.length;n++){var a=this.stats[n];t[a.name]=a.enemyDefaultValue}return t}},{key:\"addEnemy\",value:function(){this.rows.push(JSON.parse(JSON.stringify(this.defaultEnemy)))}},{key:\"save\",value:function(){for(var e=0;e<this.game.stats.length;e++){var t=this.game.stats[e];t.current=this.statsPlayer[t.name]}this.gamePersistenceService.updateGame(this.game)}},{key:\"displayRemovePopup\",value:function(e){this.rowToBeRemoved=e;var t=this;this.popupService.show(this.popupDeleteEnemyConfig.id,function(e,n){n===t.constants.choices.yes&&t.removeRow(t.rowToBeRemoved),t.rowToBeRemoved=null})}},{key:\"removeRow\",value:function(e){var t=this.rows.indexOf(e);this.rows.splice(t,1)}},{key:\"isEnemy\",value:function(e){return 0!==this.rows.indexOf(e)}},{key:\"lastColumnSizeInPercent\",value:function t(){var t=75;return this.stats&&(t-=10*this.stats.length),t}},{key:\"back\",value:function(){this.$window.history.back()}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(82),c=a(l),u=n(83),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.administration\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"administration\",{url:n.url.administration,template:\"<administration></administration>\"})}]).component(\"administration\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <h2>{{ \\'Administration\\' | translate }}</h2>\\n        <div class=\"col-md-12\">\\n            <form>\\n                <div>\\n                    <div class=\"form-group\">\\n                        <label for=\"usedLocalStorageInPercent\">{{ \"Used Local\\'s Storage in Percent\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"usedLocalStorageInPercent\" value=\"{{ $ctrl.usedLocalStorageInPercent | number : 2}}%\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"usedLocalStorage\">{{ \"Used Local\\'s Storage\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"usedLocalStorage\" value=\"{{$ctrl.usedLocalStorage / 1024 | number : 2 }}kb\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"remainingCapacity\">{{ \"Remaining Local\\'s Storage\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"remainingCapacity\" value=\"{{$ctrl.remainingCapacity / 1024 | number : 2 }}kb\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"applicationData\">{{ \"Application\\'s data\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"applicationData\" ng-model=\"$ctrl.applicationData\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"importData\">{{ \"Paste the application\\'s data copied from another browser\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" ng-model=\"$ctrl.importData\" id=\"importData\" placeholder=\"{{ \\'Imported data\\' | translate }}\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <button class=\"btn btn-danger\" ng-click=\"$ctrl.showPopupConfirmImportData()\" aria-label=\"{{ \\'Import\\' | translate }}\">{{ \\'Import\\' | translate }}</button>\\n                    </div>\\n                </div>\\n                <div>\\n                    <div class=\"form-group\">\\n                        <button class=\"btn btn-danger\" ng-click=\"$ctrl.showPopupConfirmDeleteApplicationData()\" aria-label=\"{{ \\'Delete application\\\\\\'s data\\' | translate }}\">{{ \"Delete application\\'s data\" | translate }}</button>\\n                    </div>\\n                </div>\\n            </form>\\n\\n            <popup config=\"{{ $ctrl.popupConfirmImportApplicationDataConfig }}\"></popup>\\n            <popup config=\"{{ $ctrl.popupConfirmDeleteApplicationDataConfig }}\"></popup>\\n        </div>\\n        <back-button></back-button>\\n    </div>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o){n(this,e),t.intercept(),this.persistenceService=a,this.adventurePersistenceService=r,this.constants=i,this.popupService=s,this.initData(),this.$window=o,this.popupConfirmImportApplicationDataConfig={id:\"popupConfirmImportApplicationData\",text:\"All existing application's data will be erased during the import. Are you sure to import the application data?\",choices:[i.choices.yes,i.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.popupConfirmDeleteApplicationDataConfig={id:\"popupConfirmDeleteApplicationData\",text:\"Are you sure to clear the application data?\",choices:[i.choices.yes,i.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1}}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"persistenceService\",\"adventurePersistenceService\",\"constants\",\"popupService\",\"$window\"],a(e,[{key:\"initData\",value:function(){this.applicationData=this.persistenceService[\"export\"](),this.computeLocalStorageCapacities()}},{key:\"computeLocalStorageCapacities\",value:function(){this.usedLocalStorage=this.persistenceService.getUsedCapacity(),this.remainingCapacity=this.persistenceService.getRemainingCapacity(),this.usedLocalStorageInPercent=this.persistenceService.getUsedCapacityInPercent()}},{key:\"showPopupConfirmImportData\",value:function(){var e=this;this.popupService.show(this.popupConfirmImportApplicationDataConfig.id,function(t,n){n===e.constants.choices.yes&&(e.persistenceService[\"import\"](e.importData),e.$window.location.reload())})}},{key:\"showPopupConfirmDeleteApplicationData\",value:function(){var e=this;this.popupService.show(this.popupConfirmDeleteApplicationDataConfig.id,function(t,n){n===e.constants.choices.yes&&(e.persistenceService.cleanAllData(),e.$window.location.reload())})}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(85),c=a(l),u=n(86),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.choose-language\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"choose-language\",{url:n.url.chooseLanguage,template:\"<choose-language></choose-language>\"})}]).component(\"chooseLanguage\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'Gamebooks Companion\\' | translate }}</h1>\\n        </div>\\n        <language-picker></language-picker>\\n        <button type=\"button\" class=\"btn btn-default\" ng-click=\"$ctrl.goForward()\">{{ \\'Continue\\' | translate }}</button>\\n    </div>\\n</main>\\n';\n},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r){n(this,e),this.$location=a,this.constants=r,t.intercept()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"$location\",\"constants\"],a(e,[{key:\"goForward\",value:function(){this.$location.url(this.constants.url.games)}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(88),c=a(l),u=n(89),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.about\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"about\",{url:n.url.about,template:\"<about></about>\"})}]).component(\"about\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\" uib-collapse=\"false\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'About\\' | translate }}</h1>\\n        </div>\\n\\n        <div class=\"form-group\">\\n            <label for=\"appDescription\">{{ \"Application\\'s description\" | translate }}</label>\\n            <div id=\"appDescription\">{{ \\'application.description\\' | translate }}</div>\\n        </div>\\n\\n        <div class=\"form-group\">\\n            <label for=\"appVersion\">{{ \"Application\\'s version\" | translate }}</label>\\n            <div id=\"appVersion\">{{ $ctrl.appVersion }}</div>\\n        </div>\\n\\n        <div class=\"form-group\">\\n            <label for=\"license\">{{ \"License\" | translate }}</label>\\n            <pre id=\"license\" ng-include src=\"\\'LICENSE.txt\\'\"></pre>\\n        </div>\\n\\n\\n        <h2>{{ \\'Credits\\' | translate }}</h2>\\n\\n        <table class=\"table table-striped\">\\n            <col style=\"width:30%\">\\n            <col style=\"width:30%\">\\n            <col style=\"width:40%\">\\n            <thead>\\n            <tr>\\n                <th>{{ \\'Who\\' | translate }}</th>\\n                <th>{{ \\'For\\' | translate }}</th>\\n                <th>{{ \\'Link\\' | translate }}</th>\\n            </tr>\\n            </thead>\\n            <tbody>\\n            <tr>\\n                <td>Ravenmore</td>\\n                <td>\\n                    {{ \\'map image used as favicon\\' | translate }}\\n                    <ng-include src=\"\\'map-image.html\\'\"></ng-include>\\n                </td>\\n                <td><a href=\"//opengameart.org/content/fantasy-icon-pack-by-ravenmore-0\">opengameart.org Ravenmore page</a></td>\\n            </tr>\\n            <tr>\\n                <td>JamesWhite</td>\\n                <td>\\n                    {{ \\'dice image\\' | translate }}\\n                    <ng-include src=\"\\'dice-image.html\\'\"></ng-include>\\n                </td>\\n                <td>\\n                    <a href=\"http://opengameart.org/content/dice-4\">opengameart.org JamesWhite page</a>\\n                </td>\\n            </tr>\\n            <tr>\\n                <td>SBB (Schweizerische Bundesbahnen)</td>\\n                <td>{{ \\'Web/JS Framework\\' | translate }}</td>\\n                <td><a href=\"https://github.com/SchweizerischeBundesbahnen/esta-webjs\">esta-webjs project github page</a></td>\\n            </tr>\\n            <tr>\\n                <td>{{ \\'Developers and contributors\\' | translate }}</td>\\n                <td>{{ \\'Angular JS, Bootstrap, Webpack and all existing tools that make javascript development fun to code\\' | translate }}</td>\\n                <td></td>\\n            </tr>\\n            </tbody>\\n        </table>\\n\\n        <back-button></back-button>\\n    </div>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=[\"preScreenLoadingInterceptorsCallerService\",\"constants\",function r(e,t){n(this,r),e.intercept(),this.appVersion=t.version}];t[\"default\"]=a},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(91),o=a(s),l=n(94),c=a(l),u=i[\"default\"].module(\"app.components.gui.screens.adventures\",[o[\"default\"].name,c[\"default\"].name]);t[\"default\"]=u},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(92),c=a(l),u=n(93),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.adventures.list\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"adventuresList\",{url:n.url.adventures,template:\"<adventures-list></adventures-list>\"})}]).component(\"adventuresList\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'Adventures\\' | translate }}</h1>\\n        </div>\\n        <div class=\"row\">\\n            <div class=\"col-md-12\">\\n                <table class=\"table table-striped\">\\n                    <col style=\"width:20%\">\\n                    <col style=\"width:15%\">\\n                    <col style=\"width:20%\">\\n                    <col style=\"width:5% \">\\n                    <col style=\"width:5% \">\\n                    <col style=\"width:5% \">\\n                    <col style=\"width:20%\">\\n                    <col style=\"width:5%\">\\n                    <thead>\\n                    <tr>\\n                        <th>{{ \\'Title\\' | translate }}</th>\\n                        <th>{{ \\'Serie\\' | translate }}</th>\\n                        <th>{{ \\'Author(s)\\' | translate }}</th>\\n                        <th>{{ \\'Length\\' | translate }}</th>\\n                        <th>{{ \\'Language\\' | translate }}</th>\\n                        <th>{{ \\'Version\\' | translate }}</th>\\n                        <th>{{ \\'Download status\\' | translate }}</th>\\n                        <th>{{ \\'Selection\\' | translate }}</th>\\n                    </tr>\\n                    </thead>\\n                    <tbody>\\n                    <tr ng-repeat=\"row in $ctrl.rows\">\\n                        <td>{{ row.name }}</td>\\n                        <td>{{ row.serie }}</td>\\n                        <td>{{ row.authors }}</td>\\n                        <td aria-label=\"{{ \\'NumberOfParagraphs\\' | translate: {numberOfParagraphs: row.numberOfParagraphs} }}\"\\n                            title=\"{{ \\'NumberOfParagraphs\\' | translate: {numberOfParagraphs: row.numberOfParagraphs} }}\">\\n                            {{ row.numberOfParagraphs + (!!row.numberOfParagraphs ? \\'\\' : \\'\\') }}\\n                        </td>\\n                        <td>{{ row.language | translate }}</td>\\n                        <td>{{ row.version }}</td>\\n                        <td>{{ row.downloadStatus | translate }}</td>\\n                        <td>\\n                            <button type=\"button\" class=\"btn\" ng-class=\"{ \\'btn-success\\' : row.selected, \\'btn-default\\' : !row.selected}\"\\n                                    aria-label=\"{{ !row.selected ?\\n                                        (\\'ChoiceAdventure\\' | translate: {adventureName: row.name}) :\\n                                        (\\'ChoosenAdventure\\' | translate: {adventureName: row.name}) }}\"\\n                                    title=\"{{ !row.selected ?\\n                                        (\\'ChoiceAdventure\\' | translate: {adventureName: row.name}) :\\n                                        (\\'ChoosenAdventure\\' | translate: {adventureName: row.name}) }}\"\\n                                    ng-click=\"$ctrl.select(row)\">\\n                                <span ng-class=\"{ \\'glyphicon glyphicon-ok\\' : row.selected, \\'glyphicon glyphicon-hand-left\\' : !row.selected}\" aria-hidden=\"true\"></span>\\n                            </button>\\n                        </td>\\n                    </tr>\\n                    </tbody>\\n                </table>\\n            </div>\\n        </div>\\n\\n        <back-button></back-button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Create an adventure\\' | translate }}\"\\n                title=\"{{ \\'Create an adventure\\' | translate }}\"\\n                ng-click=\"$ctrl.create()\">{{ \\'Create\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Import an adventure\\' | translate }}\"\\n                title=\"{{ \\'Import an adventure\\' | translate }}\"\\n                ng-click=\"$ctrl.displayImportAdventurePopup()\">{{ \\'Import\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Display selected adventure\\' | translate }}\"\\n                title=\"{{ \\'Display selected adventure\\' | translate }}\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                ng-click=\"$ctrl.display()\">{{ \\'Display\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-danger\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                aria-label=\"{{ \\'Remove selected adventure\\' | translate }}\"\\n                title=\"{{ \\'Remove selected adventure\\' | translate }}\"\\n                ng-click=\"$ctrl.displayRemoveAdventurePopup()\">{{ \\'Remove\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                aria-label=\"{{ \\'Export selected adventure\\' | translate }}\"\\n                title=\"{{ \\'Export selected adventure\\' | translate }}\"\\n                ng-click=\"$ctrl.displayExportAdventurePopup()\">{{ \\'Export\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                ng-disabled=\"!$ctrl.isSelectedRowDownloadable()\"\\n                aria-label=\"{{ \\'Download selected adventure\\' | translate }}\"\\n                title=\"{{ \\'Download selected adventure\\' | translate }}\"\\n                ng-click=\"$ctrl.displayDownloadAdventurePopup()\">{{ \\'Download\\' | translate }}</button>\\n    </div>\\n</main>\\n\\n<popup config=\"{{ $ctrl.popupDeleteAdventureConfig }}\"></popup>\\n<popup config=\"{{ $ctrl.popupDownloadAdventureConfig }}\"></popup>\\n<export-data-popup config=\"$ctrl.popupExportAdventureConfig\"></export-data-popup>\\n<import-data-popup config=\"$ctrl.popupImportAdventureConfig\"></import-data-popup>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c,u,d){n(this,e),this.constants=r,a.intercept(),this.$location=t,this.gamePersistenceService=i,this.adventurePersistenceService=s,this.messagesService=o,this.$translate=l,this.popupService=c,this.exportDataPopupService=u,this.importDataPopupService=d,this.popupDeleteAdventureConfig={id:\"popupDeleteAdventure\",text:\"Are you sure to remove the selected adventure?\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.popupExportAdventureConfig={id:\"popupExportAdventure\"},this.popupImportAdventureConfig={id:\"popupImportAdventure\"},this.popupDownloadAdventureConfig={id:\"popupDownloadAdventure\",text:\"Are you sure to download the selected adventure? Existing games could be non-playable after the update if the new version is not retro-compatible\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.initData()}return e.$inject=[\"$location\",\"preScreenLoadingInterceptorsCallerService\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\",\"messagesService\",\"$translate\",\"popupService\",\"exportDataPopupService\",\"importDataPopupService\"],a(e,[{key:\"initData\",value:function(){this.rows=this.adventurePersistenceService.getAdventuresOverview(),this.clearSelection();for(var e=0;e<this.rows.length;e++)this.rows[e].downloadHistory?this.rows[e].downloadStatus=this.rows[e].downloadHistory[this.rows[e].downloadHistory.length-1]:this.rows[e].downloadUrl?this.rows[e].downloadStatus=\"Downloadable\":this.rows[e].downloadStatus=\"N/A\"}},{key:\"select\",value:function(e){this.clearSelection(),e.selected=!0}},{key:\"clearSelection\",value:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].selected=!1}},{key:\"create\",value:function(){this.$location.url(this.constants.url.adventureDetail+\"/create\")}},{key:\"display\",value:function(){this.$location.url(this.constants.url.adventureDetail+\"/\"+this.getSelectedRow().id)}},{key:\"displayRemoveAdventurePopup\",value:function(){var e=this;this.popupService.show(this.popupDeleteAdventureConfig.id,function(t,n){n===e.constants.choices.yes&&e.deleteAdventure()})}},{key:\"deleteAdventure\",value:function(){this.adventurePersistenceService.deleteAdventureAndParagraphs(this.getSelectedRow().id),this.initData()}},{key:\"displayExportAdventurePopup\",value:function(){this.popupExportAdventureConfig.exportData=JSON.stringify(this.adventurePersistenceService.exportAdventure(this.getSelectedRow().id)),this.popupExportAdventureConfig.exportDownloadBlobUrl=this.exportDataPopupService.createDownloadBlobUrl(this.popupExportAdventureConfig.exportData),this.popupExportAdventureConfig.exportTitle=this.$translate.instant(\"ExportAdventure\",{adventureName:this.getSelectedRow().name}),this.exportDataPopupService.show(this.popupExportAdventureConfig.id)}},{key:\"displayImportAdventurePopup\",value:function(){var e=this;this.popupImportAdventureConfig.title=this.$translate.instant(\"Import an adventure\"),this.importDataPopupService.show(this.popupImportAdventureConfig.id,function(t,n){e.adventurePersistenceService.importAdventure(n),e.initData()})}},{key:\"displayDownloadAdventurePopup\",value:function(){var e=this;this.popupService.show(this.popupDownloadAdventureConfig.id,function(t,n){n===e.constants.choices.yes&&e.downloadAdventure()})}},{key:\"downloadAdventure\",value:function(){var e=this,t=this.adventurePersistenceService.downloadAdventure(this.getSelectedRow().id);t.then(function(t){e.initData()},function(t){e.initData()})}},{key:\"hasSelectedRow\",value:function(){return!!this.getSelectedRow()}},{key:\"isSelectedRowDownloadable\",value:function(){var e=this.getSelectedRow();return!!e&&!!e.downloadUrl}},{key:\"getSelectedRow\",value:function(){if(this.rows)for(var e=0;e<this.rows.length;e++)if(this.rows[e].selected)return this.rows[e];return null}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(95),c=a(l),u=n(96),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.adventures.detail\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"adventure-detail\",{url:n.url.adventureDetail+\"/{adventureId}\",template:\"<adventure-detail></adventure-detail>\"})}]).component(\"adventureDetail\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <h2>{{ $ctrl.adventure.name }}</h2>\\n        <div class=\"col-md-12\">\\n            <form name=\"adventureTableForm\" novalidate=\"novalidate\" ng-submit=\"$ctrl.save()\">\\n                <h3>{{ \\'General\\' | translate }}</h3>\\n                <div>\\n                    <div class=\"form-group\" ng-if=\"!$ctrl.adventure.id\">\\n                        <label for=\"name\">{{ \"Name\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"name\" ng-model=\"$ctrl.adventure.name\" required>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"serie\">{{ \"Serie\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"serie\" ng-model=\"$ctrl.adventure.serie\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"authors\">{{ \"Author(s)\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"authors\" ng-model=\"$ctrl.adventure.authors\" required>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"description\">{{ \"Description\" | translate }}</label>\\n                        <div contenteditable=\"true\" id=\"description\" class=\"form-control editable-div\" ng-model=\"$ctrl.adventure.description\"></div>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"version\">{{ \"Version\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"version\" ng-model=\"$ctrl.adventure.version\" required>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"language\">{{ \"Language\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"language\" ng-model=\"$ctrl.adventure.language\" required>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"homepage\">{{ \"Homepage\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"homepage\" ng-model=\"$ctrl.adventure.homepage\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"isbn\">{{ \"ISBN\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"isbn\" ng-model=\"$ctrl.adventure.isbn\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"startParagraphNr\">{{ \"First paragraph\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"startParagraphNr\" ng-model=\"$ctrl.adventure.startParagraphNr\" required>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"startGameNote\">{{ \"Start game\\'s note\" | translate }}</label>\\n                        <div contenteditable=\"true\" id=\"startGameNote\" class=\"form-control editable-div\" ng-model=\"$ctrl.adventure.startGameNote\"></div>\\n                    </div>\\n                </div>\\n\\n                <h3>{{ \\'Stats rules\\' | translate }}</h3>\\n                <div>\\n                    <table class=\"table table-striped\">\\n                        <col style=\"width:20%\">\\n                        <col style=\"width:30%\">\\n                        <col style=\"width:15%\">\\n                        <col style=\"width:15%\">\\n                        <col style=\"width:20%\">\\n                        <thead>\\n                        <tr>\\n                            <th>\\n                                {{ \\'Name\\' | translate }}\\n                            </th>\\n                            <th>\\n                                {{ \\'Player stats value generation\\' | translate }}\\n                            </th>\\n                            <th aria-label=\"{{ \\'Is this stats displayed in battle?\\' | translate }}\"\\n                                title=\"{{ \\'Is this stat displayed in battle?\\' | translate }}\">\\n                                {{ \\'For battle?\\' | translate }}\\n                            </th>\\n                            <th aria-label=\"{{ \\'Is it a enemy stats?\\' | translate }}\"\\n                                title=\"{{ \\'Is it a enemy stats?\\' | translate }}\">\\n                                {{ \\'For enemy?\\' | translate }}\\n                            </th>\\n                            <th aria-label=\"{{ \\'Default value of the stats for enemy\\' | translate }}\"\\n                                title=\"{{ \\'Default value of the stats for enemy\\' | translate }}\">\\n                                {{ \\'Default enemy value\\' | translate }}\\n                            </th>\\n                            <th></th>\\n                            <th></th>\\n                            <th>\\n                                <button type=\"button\" class=\"btn btn-default\"\\n                                        aria-label=\"{{ \\'Add stats\\' | translate}}\"\\n                                        title=\"{{ \\'Add stats\\' | translate}}\"\\n                                        ng-click=\"$ctrl.addRow()\"\\n                                        ng-show=\"!$ctrl.hasEditedRow()\">\\n                                    <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n                                </button>\\n                            </th>\\n                        </tr>\\n                        </thead>\\n                        <tbody>\\n\\n                        <tr ng-repeat=\"row in $ctrl.adventure.stats\">\\n                            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                                {{ row.name }}\\n                            </td>\\n                            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                                <input required type=\"text\" class=\"form-control\" ng-model=\"row.name\">\\n                                <div class=\"error\" ng-show=\"!row.name\">\\n                                    {{ \\'Please fill the name of the stats\\' | translate }}\\n                                </div>\\n                            </td>\\n\\n                            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                                {{ row.init.sixDiceQuantity + \\'d6\\' + (!!row.init.constant ? \\'+\\' + row.init.constant : \\'\\')   }}\\n                            </td>\\n                            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                                <div class=\"form-group\">\\n                                    <label for=\"sixDiceQuantity\">{{ \"Quantity of dices 6 faces\" | translate }}</label>\\n                                    <input required id=\"sixDiceQuantity\" type=\"number\" class=\"form-control\" ng-model=\"row.init.sixDiceQuantity\">\\n                                </div>\\n                                <div class=\"form-group\">\\n                                    <label for=\"constant\">{{ \"Constant\" | translate }}</label>\\n                                    <input id=\"constant\" type=\"number\" class=\"form-control\" ng-model=\"row.init.constant\">\\n                                </div>\\n                                <div class=\"error\" ng-show=\"!row.init.sixDiceQuantity\">\\n                                    <!-- check error only on field -->\\n                                    {{ \\'Please fill the quantity of dices 6 faces used to generate a value for this stats\\' | translate }}\\n                                </div>\\n                            </td>\\n\\n                            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                                {{ \\'yesno_\\' + row.battle.displayed | translate }}\\n                            </td>\\n                            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                                <input type=\"checkbox\" class=\"form-control\" ng-model=\"row.battle.displayed\" id=\"displayed\"><br>\\n                            </td>\\n\\n                            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                                {{ \\'yesno_\\' + row.battle.editableForEnemy | translate }}\\n                            </td>\\n                            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                                <input type=\"checkbox\" class=\"form-control\" ng-model=\"row.battle.editableForEnemy\" id=\"editableForEnemy\"><br>\\n                            </td>\\n\\n                            <td ng-if=\"!$ctrl.isRowEdited(row)\">\\n                                {{ row.battle.enemyDefaultValue }}\\n                            </td>\\n                            <td ng-if=\"$ctrl.isRowEdited(row)\">\\n                                <input id=\"enemyDefaultValue\" type=\"number\" class=\"form-control\" ng-model=\"row.battle.enemyDefaultValue\" ng-required=\"!!row.battle.editableForEnemy\" >\\n                                <div class=\"error\" ng-show=\"!!row.battle.editableForEnemy && !row.battle.enemyDefaultValue\">\\n                                    <!-- check error only on field -->\\n                                    {{ \\'Please fill a default value of this stats for enemies\\' | translate }}\\n                                </div>\\n                                <div class=\"error\" ng-show=\"!row.battle.editableForEnemy && !!row.battle.enemyDefaultValue\">\\n                                    <!-- check error only on field -->\\n                                    {{ \\'Please do not fill a default value as this stats is not available for enemies\\' | translate }}\\n                                </div>\\n                            </td>\\n\\n                            <td>\\n                                <button type=\"button\" class=\"btn btn-success\"\\n                                        aria-label=\"{{ \\'Save stats changes\\' | translate}}\"\\n                                        title=\"{{ \\'Save stats changes\\' | translate}}\"\\n                                        ng-click=\"$ctrl.saveRowChanges(adventureTableForm.$invalid, row)\"\\n                                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                                    <span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>\\n                                </button>\\n                            </td>\\n\\n                            <td>\\n                                <button type=\"button\" class=\"btn btn-danger\"\\n                                        aria-label=\"{{ \\'Abort stats changes\\' | translate}}\"\\n                                        title=\"{{ \\'Abort stats changes\\' | translate}}\"\\n                                        ng-click=\"$ctrl.abortRowChanges()\"\\n                                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                                    <span class=\"glyphicon glyphicon-arrow-left\" aria-hidden=\"true\"></span>\\n                                </button>\\n                            </td>\\n\\n                            <td>\\n                                <button type=\"button\" class=\"btn btn-default\"\\n                                        aria-label=\"{{ \\'Edit stats\\' | translate}}\"\\n                                        title=\"{{ \\'Edit stats\\' | translate}}\"\\n                                        ng-click=\"$ctrl.editRow(row)\"\\n                                        ng-show=\"!$ctrl.hasEditedRow()\">\\n                                    <span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\"></span>\\n                                </button>\\n                                <button type=\"button\" class=\"btn btn-danger\"\\n                                        aria-label=\"{{ \\'Remove stats\\' | translate }}\"\\n                                        title=\"{{ \\'Remove stats\\' | translate }}\"\\n                                        ng-click=\"$ctrl.displayRemovePopup(row)\"\\n                                        ng-disabled=\"$ctrl.addedRow\"\\n                                        ng-show=\"$ctrl.isRowEdited(row)\">\\n                                    <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\\n                                </button>\\n                            </td>\\n                        </tr>\\n                        </tbody>\\n                    </table>\\n                </div>\\n\\n                <h3>{{ \\'Initial items\\' | translate }}</h3>\\n                <div>\\n                    <items items=\"$ctrl.adventure.items\"></items>\\n                </div>\\n            </form>\\n        </div>\\n        <back-button></back-button>\\n        <button type=\"button\" class=\"btn btn-primary\"\\n                aria-label=\"{{ \\'Save changes\\' | translate }}\"\\n                title=\"{{ \\'Save changes\\' | translate }}\"\\n                ng-click=\"$ctrl.save(adventureTableForm)\">{{ \\'Save\\' | translate }}</button>\\n    </div>\\n</main>\\n\\n<popup config=\"{{ $ctrl.popupDeleteStatsConfig }}\"></popup>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c,u,d,p){n(this,e),t.intercept(),this.persistenceService=a,this.adventurePersistenceService=r,this.$stateParams=i,this.$location=s,this.constants=o,this.popupService=l,this.messagesService=c,this.$timeout=u,this.$window=d,this.formHelperService=p,this.initData(),this.popupDeleteStatsConfig={id:\"popupDeleteStats\",text:\"Are you sure to remove the status?\",choices:[o.choices.yes,o.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.setInitialFocus()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"persistenceService\",\"adventurePersistenceService\",\"$stateParams\",\"$location\",\"constants\",\"popupService\",\"messagesService\",\"$timeout\",\"$window\",\"formHelperService\"],a(e,[{key:\"initData\",value:function(){var e=encodeURIComponent(this.$stateParams.adventureId);e&&(\"create\"===e?(this.adventure={stats:[],items:[]},this.mode=\"create\"):(this.adventure=this.adventurePersistenceService.getAdventure(e),this.mode=\"edit\"))}},{key:\"setInitialFocus\",value:function(){var e=this;this.$timeout(function(){var t=void 0;t=\"create\"===e.mode?e.$window.document.getElementById(\"name\"):e.$window.document.getElementById(\"authors\"),t&&t.focus()})}},{key:\"save\",value:function(e){if(this.formHelperService.setErrorFieldsAsDirty(e,!0),!e.$invalid){if(this.adventure.items){for(var t=[],n=0;n<this.adventure.items.length;n++)t.push({quantity:this.adventure.items[n].quantity,description:this.adventure.items[n].description});this.adventure.items=t}try{this.adventurePersistenceService.updateAdventureWithoutParagraphs(this.adventure),this.$location.url(this.constants.url.adventures)}catch(a){this.messagesService.errorMessage(a,!1)}}}},{key:\"addRow\",value:function(){var e={init:{},battle:{displayed:!0,editableForEnemy:!1}};this.adventure.stats.push(e),this.addedRow=e}},{key:\"displayRemovePopup\",value:function(e){this.rowToBeRemoved=e;var t=this;this.popupService.show(this.popupDeleteStatsConfig.id,function(e,n){n===t.constants.choices.yes&&t.removeRow(t.rowToBeRemoved),t.rowToBeRemoved=null})}},{key:\"removeRow\",value:function(e){var t=this.adventure.stats.indexOf(e);this.adventure.stats.splice(t,1),this.clearEditedRow()}},{key:\"editRow\",value:function(e){this.editedRow=e,this.originalRow={name:e.name,init:{sixDiceQuantity:e.init.sixDiceQuantity,constants:e.init.constant},battle:{displayed:e.battle.displayed,enemyDefaultValue:e.battle.enemyDefaultValue,editableForEnemy:e.battle.editableForEnemy}}}},{key:\"isRowEdited\",value:function(e){return e===this.editedRow||e===this.addedRow}},{key:\"hasEditedRow\",value:function(){return!!this.editedRow||!!this.addedRow}},{key:\"getEditRow\",value:function(){return this.addedRow?this.addedRow:this.editedRow?this.editedRow:null}},{key:\"saveRowChanges\",value:function(e){this.getEditRow().name&&this.getEditRow().init.sixDiceQuantity&&(!this.getEditRow().battle.editableForEnemy&&this.getEditRow().battle.enemyDefaultValue||this.clearEditedRow());\n}},{key:\"abortRowChanges\",value:function(){this.addedRow&&this.removeRow(this.addedRow),this.editedRow&&(this.editedRow.name=this.originalRow.name,this.editedRow.init=this.originalRow.init,this.editedRow.battle=this.originalRow.battle),this.clearEditedRow()}},{key:\"clearEditedRow\",value:function(){this.addedRow=null,this.editedRow=null,this.originalRow=null}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(98),o=a(s),l=n(101),c=a(l),u=i[\"default\"].module(\"app.components.gui.screens.libraries\",[o[\"default\"].name,c[\"default\"].name]);t[\"default\"]=u},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(99),c=a(l),u=n(100),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.libraries.list\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"librariesList\",{url:n.url.libraries,template:\"<libraries-list></libraries-list>\"})}]).component(\"librariesList\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <div class=\"page-header\">\\n            <h1>{{ \\'Libraries\\' | translate }}</h1>\\n        </div>\\n        <div class=\"row\">\\n            <div class=\"col-md-12\">\\n                <table class=\"table table-striped\">\\n                    <col style=\"width:55%\">\\n                    <col style=\"width:20%\">\\n                    <col style=\"width:20%\">\\n                    <col style=\"width:5%\">\\n                    <thead>\\n                    <tr>\\n                        <th>{{ \\'Site\\' | translate }}</th>\\n                        <th>{{ \\'Library url\\' | translate }}</th>\\n                        <th>{{ \\'Download Status\\' | translate }}</th>\\n                        <th>{{ \\'Selection\\' | translate }}</th>\\n                    </tr>\\n                    </thead>\\n                    <tbody>\\n                    <tr ng-repeat=\"row in $ctrl.rows\">\\n                        <td ng-if=\"!!row.siteUrl\"><a href=\"{{ row.siteUrl }}\">{{ row.siteName }}</a></td>\\n                        <td ng-if=\"!row.siteUrl\">{{ row.siteName }}</td>\\n                        <td><a href=\"{{ row.libraryUrl }}\" target=\"_blank\">{{ \\'Detail\\' | translate }}</a></td>\\n                        <td>{{ row.lastDownloadStatus }}</td>\\n                        <td>\\n                            <button type=\"button\" class=\"btn\" ng-class=\"{ \\'btn-success\\' : row.selected, \\'btn-default\\' : !row.selected}\"\\n                                    aria-label=\"{{ !row.selected ?\\n                                        (\\'ChoiceLibrary\\' | translate: {siteName: row.siteName}) :\\n                                        (\\'ChoosenLibrary\\' | translate: {siteName: row.siteName}) }}\"\\n                                    title=\"{{ !row.selected ?\\n                                        (\\'ChoiceLibrary\\' | translate: {siteName: row.siteName}) :\\n                                        (\\'ChoosenLibrary\\' | translate: {siteName: row.siteName}) }}\"\\n                                    ng-click=\"$ctrl.select(row)\">\\n                                <span ng-class=\"{ \\'glyphicon glyphicon-ok\\' : row.selected, \\'glyphicon glyphicon-hand-left\\' : !row.selected}\" aria-hidden=\"true\"></span>\\n                            </button>\\n                        </td>\\n                    </tr>\\n                    </tbody>\\n                </table>\\n            </div>\\n        </div>\\n\\n        <back-button></back-button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Create a library\\' | translate }}\"\\n                title=\"{{ \\'Create a library\\' | translate }}\"\\n                ng-click=\"$ctrl.create()\">{{ \\'Create\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Import libraries\\' | translate }}\"\\n                title=\"{{ \\'Import libraries\\' | translate }}\"\\n                ng-click=\"$ctrl.displayImportLibrariesPopup()\">{{ \\'Import\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Display selected library\\' | translate }}\"\\n                title=\"{{ \\'Display selected library\\' | translate }}\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                ng-click=\"$ctrl.display()\">{{ \\'Display\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-danger\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                aria-label=\"{{ \\'Remove selected library\\' | translate }}\"\\n                title=\"{{ \\'Remove selected library\\' | translate }}\"\\n                ng-click=\"$ctrl.displayRemoveLibraryPopup()\">{{ \\'Remove\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Export libraries\\' | translate }}\"\\n                title=\"{{ \\'Export libraries\\' | translate }}\"\\n                ng-click=\"$ctrl.displayExportLibrariesPopup()\">{{ \\'Export\\' | translate }}</button>\\n        <button type=\"button\" class=\"btn btn-default\"\\n                aria-label=\"{{ \\'Download libraries\\' | translate }}\"\\n                title=\"{{ \\'Download libraries\\' | translate }}\"\\n                ng-disabled=\"!$ctrl.hasSelectedRow()\"\\n                ng-click=\"$ctrl.downloadLibrary()\">{{ \\'Download\\' | translate }}</button>\\n    </div>\\n</main>\\n\\n<popup config=\"{{ $ctrl.popupDeleteLibraryConfig }}\"></popup>\\n<export-data-popup config=\"$ctrl.popupExportLibrariesConfig\"></export-data-popup>\\n<import-data-popup config=\"$ctrl.popupImportLibrariesConfig\"></import-data-popup>\\n'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c,u,d,p){n(this,e),this.constants=r,a.intercept(),this.$location=t,this.gamePersistenceService=i,this.adventurePersistenceService=s,this.libraryPersistenceService=p,this.messagesService=o,this.$translate=l,this.popupService=c,this.exportDataPopupService=u,this.importDataPopupService=d,this.popupDeleteLibraryConfig={id:\"popupDeleteLibrary\",text:\"Are you sure to remove the selected library?\",choices:[r.choices.yes,r.choices.no],withCloseButton:!1,closeOnClickOutsideModal:!1},this.popupExportLibrariesConfig={id:\"popupExportLibraries\"},this.popupImportLibrariesConfig={id:\"popupImportLibraries\"},this.initData()}return e.$inject=[\"$location\",\"preScreenLoadingInterceptorsCallerService\",\"constants\",\"gamePersistenceService\",\"adventurePersistenceService\",\"messagesService\",\"$translate\",\"popupService\",\"exportDataPopupService\",\"importDataPopupService\",\"libraryPersistenceService\"],a(e,[{key:\"initData\",value:function(){this.rows=this.libraryPersistenceService.getLibraries();for(var e=0;e<this.rows.length;e++)this.rows[e].downloadHistory&&(this.rows[e].lastDownloadStatus=this.rows[e].downloadHistory[this.rows[e].downloadHistory.length-1]);this.clearSelection()}},{key:\"select\",value:function(e){this.clearSelection(),e.selected=!0}},{key:\"clearSelection\",value:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].selected=!1}},{key:\"create\",value:function(){this.$location.url(this.constants.url.libraryDetail+\"/create\")}},{key:\"display\",value:function(){this.$location.url(this.constants.url.libraryDetail+\"/\"+this.getSelectedRow().id)}},{key:\"displayRemoveLibraryPopup\",value:function(){var e=this;this.popupService.show(this.popupDeleteLibraryConfig.id,function(t,n){n===e.constants.choices.yes&&e.deleteLibrary()})}},{key:\"deleteLibrary\",value:function(){this.libraryPersistenceService.deleteLibrary(this.getSelectedRow().id),this.initData()}},{key:\"displayExportLibrariesPopup\",value:function(){this.popupExportLibrariesConfig.exportData=this.libraryPersistenceService.exportLibraries(),this.popupExportLibrariesConfig.exportDownloadBlobUrl=this.exportDataPopupService.createDownloadBlobUrl(this.popupExportLibrariesConfig.exportData),this.popupExportLibrariesConfig.exportTitle=this.$translate.instant(\"Export libraries\"),this.exportDataPopupService.show(this.popupExportLibrariesConfig.id)}},{key:\"displayImportLibrariesPopup\",value:function(){var e=this;this.popupImportLibrariesConfig.title=this.$translate.instant(\"Import libraries\"),this.importDataPopupService.show(this.popupImportLibrariesConfig.id,function(t,n){try{e.libraryPersistenceService.importLibraries(n),e.initData()}catch(a){e.messagesService.errorMessage(a,!1)}})}},{key:\"downloadLibrary\",value:function(){var e=this,t=this.libraryPersistenceService.downloadLibrary(this.getSelectedRow());t.then(function(t){e.initData()},function(t){e.initData()})}},{key:\"hasSelectedRow\",value:function(){return!!this.getSelectedRow()}},{key:\"getSelectedRow\",value:function(){if(this.rows)for(var e=0;e<this.rows.length;e++)if(this.rows[e].selected)return this.rows[e];return null}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(5),o=a(s),l=n(102),c=a(l),u=n(103),d=a(u),p=i[\"default\"].module(\"app.components.gui.screen.libraries.detail\",[o[\"default\"]]).config([\"$stateProvider\",\"$urlRouterProvider\",\"constants\",function(e,t,n){t.otherwise(\"/\"),e.state(\"library-detail\",{url:n.url.libraryDetail+\"/{libraryId}\",template:\"<library-detail></library-detail>\"})}]).component(\"libraryDetail\",{template:c[\"default\"],controller:d[\"default\"]});t[\"default\"]=p},function(e,t){e.exports='<navbar></navbar>\\n<messages></messages>\\n<main>\\n    <div class=\"container bg-white\" role=\"main\">\\n        <h2>{{ \\'Library\\' }}</h2>\\n        <div class=\"col-md-12\">\\n            <form name=\"libraryForm\" novalidate=\"novalidate\" ng-submit=\"$ctrl.save()\">\\n                <div>\\n                    <div class=\"form-group\">\\n                        <label for=\"siteName\">{{ \"Name\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"siteName\" ng-model=\"$ctrl.library.siteName\" required>\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"siteUrl\">{{ \"Homepage\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"siteUrl\" ng-model=\"$ctrl.library.siteUrl\">\\n                    </div>\\n                    <div class=\"form-group\">\\n                        <label for=\"libraryUrl\">{{ \"Library url\" | translate }}</label>\\n                        <input type=\"text\" class=\"form-control\" id=\"libraryUrl\" ng-model=\"$ctrl.library.libraryUrl\" required>\\n                    </div>\\n                </div>\\n            </form>\\n        </div>\\n        <back-button></back-button>\\n        <button type=\"button\" class=\"btn btn-primary\"\\n                aria-label=\"{{ \\'Save changes\\' | translate }}\"\\n                title=\"{{ \\'Save changes\\' | translate }}\"\\n                ng-click=\"$ctrl.save(libraryForm)\">{{ \\'Save\\' | translate }}</button>\\n    </div>\\n</main>'},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l,c,u){n(this,e),t.intercept(),this.libraryPersistenceService=a,this.$stateParams=r,this.$location=i,this.constants=s,this.messagesService=o,this.$timeout=l,this.$window=c,this.formHelperService=u,this.initData(),this.setInitialFocus()}return e.$inject=[\"preScreenLoadingInterceptorsCallerService\",\"libraryPersistenceService\",\"$stateParams\",\"$location\",\"constants\",\"messagesService\",\"$timeout\",\"$window\",\"formHelperService\"],a(e,[{key:\"initData\",value:function(){var e=encodeURIComponent(this.$stateParams.libraryId);e&&(\"create\"===e?(this.library={},this.mode=\"create\"):(this.library=this.libraryPersistenceService.getLibrary(e),this.mode=\"edit\"))}},{key:\"setInitialFocus\",value:function(){var e=this;this.$timeout(function(){var t=e.$window.document.getElementById(\"siteName\");t&&t.focus()})}},{key:\"save\",value:function(e){if(this.formHelperService.setErrorFieldsAsDirty(e,!0),!e.$invalid)try{this.libraryPersistenceService.updateLibrary(this.library),this.$location.url(this.constants.url.libraries)}catch(t){this.messagesService.errorMessage(t,!1)}}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(105),o=a(s),l=n(107),c=a(l),u=n(109),d=a(u),p=n(111),h=a(p),f=n(119),v=a(f),g=n(121),m=a(g),b=n(123),y=a(b),w=n(125),S=a(w),P=i[\"default\"].module(\"app.components.services\",[c[\"default\"].name,h[\"default\"].name,v[\"default\"].name,o[\"default\"].name,d[\"default\"].name,m[\"default\"].name,y[\"default\"].name,S[\"default\"].name]);t[\"default\"]=P},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(106),o=a(s),l=i[\"default\"].module(\"app.components.services.language-availability-checker\",[]).service(\"languageAvailabilityCheckerService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i){n(this,e),this.gamePersistenceService=t,this.$location=a,this.constants=r,this.$translate=i}return e.$inject=[\"gamePersistenceService\",\"$location\",\"constants\",\"$translate\"],a(e,[{key:\"selectLanguageIfMissing\",value:function(){var e=this.gamePersistenceService.getSelectedLanguage(),t=this.$location.url();e?this.$translate.use(e):t&&!t.startsWith(\"/choose-language\")&&this.$location.url(this.constants.url.chooseLanguage)}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(108),o=a(s),l=i[\"default\"].module(\"app.components.services.software-requirements-checker\",[]).service(\"softwareRequirementsCheckerService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.messagesService=t}return e.$inject=[\"messagesService\"],a(e,[{key:\"checkSoftwareRequirements\",value:function(){var e=!0;this.isLocalStorageSupported()||(e=!1,this.messagesService.errorMessage(\"The application cannot be used because the version of the browser is too old or because it is not possible to save data in 'localStorage'.\",!0))}},{key:\"isLocalStorageSupported\",value:function(){try{var e=window.localStorage,t=\"__storage_test__\";return e.setItem(t,t),e.removeItem(t),!0}catch(n){return!1}}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(110),o=a(s),l=i[\"default\"].module(\"app.components.services.pre-screen-loading-interceptors-caller\",[]).service(\"preScreenLoadingInterceptorsCallerService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r){n(this,e),this.softwareRequirementsCheckerService=a,this.languageAvailabilityCheckerService=t,this.predefinedDataLoaderService=r}return e.$inject=[\"languageAvailabilityCheckerService\",\"softwareRequirementsCheckerService\",\"predefinedDataLoaderService\"],a(e,[{key:\"intercept\",value:function(){this.softwareRequirementsCheckerService.checkSoftwareRequirements(),this.languageAvailabilityCheckerService.selectLanguageIfMissing(),this.predefinedDataLoaderService.loadPredefinedData()}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(112),o=a(s),l=n(114),c=a(l),u=n(116),d=a(u),p=n(118),h=a(p),f=i[\"default\"].module(\"app.components.services.persistence\",[o[\"default\"].name,c[\"default\"].name,d[\"default\"].name]).service(\"persistenceService\",h[\"default\"]);t[\"default\"]=f},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(113),o=a(s),l=i[\"default\"].module(\"app.components.services.persistence.game\",[]).service(\"gamePersistenceService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i){n(this,e),this.persistenceService=a,this.adventurePersistenceService=r,this.constants=t,this.messagesService=i}return e.$inject=[\"constants\",\"persistenceService\",\"adventurePersistenceService\",\"messagesService\"],a(e,[{key:\"getSelectedLanguage\",value:function(){return this.persistenceService.get(this.constants.data.selectedLanguage)}},{key:\"setSelectedLanguage\",value:function(e){this.persistenceService.save(this.constants.data.selectedLanguage,e)}},{key:\"addGame\",value:function(e){var t={id:this.newGameId(),playerName:e.playerName,adventureId:e.adventureId,items:e.items,stats:e.stats,currentParagraphNr:e.currentParagraphNr};t.stats=[];for(var n=0;n<e.stats.length;n++)t.stats.push({name:e.stats[n].name,initial:e.stats[n].value,current:e.stats[n].value});return this.updateGame(t),t}},{key:\"importGame\",value:function(e){try{var t=JSON.parse(e),n=[];t.id||n.push(\"id\"),t.playerName||n.push(\"playerName\"),t.adventureId||n.push(\"adventureId\"),t.currentParagraphNr||n.push(\"currentParagraphNr\"),n.length>0?this.messagesService.errorMessage(\"Cannot import game because of missing mandatory fields: \"+n.join(\", \"),!1):this.getGame(t.id)?this.messagesService.errorMessage(\"The game already exists with id '\"+t.id+\"'\",!1):this.updateGame(t)}catch(a){this.messagesService.errorMessage(\"Cannot import game\",!1)}}},{key:\"updateGame\",value:function(e){if(e){e=JSON.parse(JSON.stringify(e));var t=this.getGamePersistenceKey(e.id);if(e.items)for(var n=0;n<e.items.length;n++)delete e.items[n].$$hashKey;this.persistenceService.save(t,e)}}},{key:\"deleteGame\",value:function(e,t,n){var a=this.getGame(e),r=this.getGamePersistenceKey(e);if(t||n)for(var i=this.adventurePersistenceService.getAdventureParagraphKeys(a.adventureId),s=0;s<i.length;s++){var o=this.persistenceService.get(i[s]);if(t&&o.notes){for(var l=[],c=0;c<o.notes.length;c++)o.notes[c].playerName&&o.notes[c].playerName===a.playerName||l.push(o.notes[c]);o.notes=l,this.adventurePersistenceService.updateParagraph(a.adventureId,o)}}localStorage.removeItem(r)}},{key:\"newGameId\",value:function(){return(new Date).getTime().toString()}},{key:\"getUrlOfGame\",value:function(e,t){var n=this.getGame(e);t||(t=n.currentParagraphNr);var a=\"/\"+encodeURIComponent(n.adventureId)+\"/\"+encodeURIComponent(t)+\"/game/\"+encodeURIComponent(n.id);return a}},{key:\"getGame\",value:function(e){var t=this.getGamePersistenceKey(e);return this.persistenceService.get(t)}},{key:\"getGamePersistenceKeys\",value:function(){return this.persistenceService.findKeysWithPrefix(this.constants.data.game)}},{key:\"getGamePersistenceKey\",value:function(e){var t=e;return t.startsWith(this.constants.data.game)||(t=this.constants.data.game+\".\"+t),t}},{key:\"setCurrentParagraphNrOfGame\",value:function(e,t,n){var a=this.getGame(e);if(t){var r=a.adventureId+\".choosen\",i=this.persistenceService.get(r);i||(i={});var s=n,o=i[s];o||(o=[],i[s]=o),o.indexOf(e)===-1&&(o.push(e),this.persistenceService.save(r,i))}a.currentParagraphNr=n,a.path||(a.path=[]),a.path.push(n),this.updateGame(a)}},{key:\"getChoosenChoices\",value:function(e,t){var n=this.getGame(e),a=n.adventureId+\".choosen\",r=this.persistenceService.get(a);if(r){var i=this.adventurePersistenceService.getParagraph(n.adventureId,t),s=[];if(i.choices)for(var o=0;o<i.choices.length;o++){var l=i.choices[o].paragraphNr;r[l]&&s.push(i.choices[o].paragraphNr)}return s}return[]}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(115),o=a(s),l=i[\"default\"].module(\"app.components.services.persistence.adventure\",[]).service(\"adventurePersistenceService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l){n(this,e),this.constants=t,this.persistenceService=a,this.messagesService=r,this.$translate=i,this.$q=s,this.remoteJsonRetrieverService=o,this.$filter=l}return e.$inject=[\"constants\",\"persistenceService\",\"messagesService\",\"$translate\",\"$q\",\"remoteJsonRetrieverService\",\"$filter\"],a(e,[{key:\"downloadAdventure\",value:function(e){var t=this.getAdventure(e),n=this,a=this.$q.defer(),r=this.remoteJsonRetrieverService.retrieveJson(t.downloadUrl);return r.then(function(e){n.addDownloadHistory(t,n.now()+\" : downloaded\"),e.id=t.id,e.downloadHistory=t.downloadHistory,e.downloadUrl=t.downloadUrl,n[\"import\"](e),n.messagesService.successMessage(\"The selected adventure is downloaded/updated\",!1),a.resolve(\"Success\")},function(e){n.addDownloadHistory(t,n.now()+\" : error\"),n.updateAdventureWithoutParagraphs(t),n.messagesService.errorMessage(e,!1),a.reject(e)}),a.promise}},{key:\"addDownloadHistory\",value:function(e,t){e.downloadHistory||(e.downloadHistory=[]),e.downloadHistory.push(t)}},{key:\"now\",value:function t(){var t=new Date;return this.$filter(\"date\")(t,\"dd.MM.yyyy HH:mm\")}},{key:\"updateDownloadableAdventures\",value:function(e){if(e)for(var t=0;t<e.length;t++)this.updateDownloadableAdventure(e[t])}},{key:\"updateDownloadableAdventure\",value:function(e){try{this.updateAdventureWithoutParagraphs(e)}catch(t){if(this.constants.errors.adventureAlreadyExist===t){var n=this.getAdventure(e.id);n.downloadUrl=e.downloadUrl,this.updateAdventureWithoutParagraphs(n)}}}},{key:\"getAdventuresOverview\",value:function(){for(var e=this.getAdventurePersistenceKeys(),t=[],n=0;n<e.length;n++){var a=this.persistenceService.get(e[n]);t.push({id:a.id,name:a.name,numberOfParagraphs:a.numberOfParagraphs,language:a.language,version:a.version,authors:a.authors,serie:a.serie,downloadUrl:a.downloadUrl,downloadHistory:a.downloadHistory})}return t}},{key:\"getAdventurePersistenceKeys\",value:function(){for(var e=Object.keys(localStorage),t=[],n=0;n<e.length;n++)e[n].startsWith(this.constants.data.adventure)&&e[n].indexOf(\"paragraph.\")===-1&&e[n].indexOf(\".choosen\")===-1&&t.push(e[n]);return t}},{key:\"getAdventure\",value:function(e){return this.persistenceService.get(this.getAdventurePersistenceKey(e))}},{key:\"importAdventure\",value:function(e){try{var t=JSON.parse(e,!0);this[\"import\"](t)}catch(n){this.messagesService.errorMessage(\"Cannot import adventure\",!1)}}},{key:\"import\",value:function(e,t){try{var n=[];if(e.id||n.push(\"id\"),e.name||n.push(\"name\"),e.authors||n.push(\"authors\"),e.version||n.push(\"version\"),e.language||n.push(\"language\"),e.startParagraphNr||n.push(\"startParagraphNr\"),n.length>0)this.messagesService.errorMessage(\"Cannot import game because of missing mandatory fields: \"+n.join(\", \"),!1);else if(t&&this.getAdventure(e.id))this.messagesService.errorMessage(\"The adventure already exists with id '\"+e.id+\"'\",!1);else if(e.paragraphs&&(e.numberOfParagraphs=e.paragraphs.length),this.updateAdventureWithoutParagraphs(e),e.paragraphs)for(var a=0;a<e.paragraphs.length;a++)this.setParagraph(e.id,e.paragraphs[a],t)}catch(r){this.messagesService.errorMessage(\"Cannot import adventure\",!1)}}},{key:\"updateAdventureWithoutParagraphs\",value:function(e){var t=this.getAdventureIdFromAdventureName(e.name);if(!e.id){e.id=t;var n=this.getAdventure(t);if(n)throw this.constants.errors.adventureAlreadyExist}for(var a={},r=Object.keys(e),i=0;i<r.length;i++)\"paragraphs\"!==r[i]&&(a[r[i]]=e[r[i]]);this.persistenceService.save(this.constants.data.adventure+\".\"+e.id,a)}},{key:\"getAdventureIdFromAdventureName\",value:function(e){return encodeURIComponent(e.replace(/\\s+/g,\"-\").toLowerCase())}},{key:\"deleteAdventureAndParagraphs\",value:function(e){this.persistenceService.remove(this.getAdventurePersistenceKey(e));for(var t=this.getAdventureParagraphKeys(e),n=0;n<t.length;n++)this.persistenceService.remove(t[n])}},{key:\"setParagraph\",value:function(e,t,n){var a=this.getParagraphPersistenceKey(e,t.paragraphNr);if(n){var r=this.persistenceService.get(a);if(r)return void this.messagesService.errorMessage(this.$translate.instant(\"DupplicateParagraph\",{paragraphNr:t.paragraphNr}),!0)}this.checkDupplicateChoices(t),this.persistenceService.save(a,t)}},{key:\"getOrCreateParagraph\",value:function(e,t){var n=this.getParagraph(e,t);if(n)return n;var a={version:this.constants.version,adventureId:e,paragraphNr:new Number(t),description:\"\",choices:[]},r=this.getAdventure(e);return r.numberOfParagraphs||(r.numberOfParagraphs=0),r.numberOfParagraphs=r.numberOfParagraphs+1,this.updateAdventureWithoutParagraphs(r),this.updateParagraph(e,a),a}},{key:\"getParagraph\",value:function(e,t){var n=this.getParagraphPersistenceKey(e,t);return this.persistenceService.get(n)}},{key:\"updateParagraph\",value:function(e,t){if(t){t=JSON.parse(JSON.stringify(t));var n=this.getParagraphPersistenceKey(e,t.paragraphNr);if(t.choices)for(var a=0;a<t.choices.length;a++)delete t.choices[a].$$hashKey;this.checkDupplicateChoices(t),this.persistenceService.save(n,t)}}},{key:\"checkDupplicateChoices\",value:function(e){if(e&&e.choices)for(var t=[],n=0;n<e.choices.length;n++)t.indexOf(e.choices[n].paragraphNr)!==-1&&this.messagesService.errorMessage(this.$translate.instant(\"DupplicateParagraphChoices\",{paragraphNr:e.paragraphNr,choiceParagraphNr:e.choices[n].paragraphNr}),!0),t.push(e.choices[n].paragraphNr)}},{key:\"getAdventureParagraphKeys\",value:function(e){for(var t=[],n=Object.keys(localStorage),a=this.constants.data.adventure+\".\"+e,r=0;r<n.length;r++)if(n[r].startsWith(this.constants.data.adventure)&&n[r].indexOf(\"paragraph.\")!==-1){var i=n[r].substring(0,n[r].indexOf(\".paragraph\"));i===a&&t.push(n[r])}return t}},{key:\"getParagraphPersistenceKey\",value:function(e,t){return this.getAdventurePersistenceKey(e)+\".paragraph.\"+t}},{key:\"getAdventurePersistenceKey\",value:function(e){var t=e;return t.startsWith(this.constants.data.adventure+\".\")||(t=this.constants.data.adventure+\".\"+t),t}},{key:\"exportAdventure\",value:function(e){var t=this.getAdventure(e);t.paragraphs=[];for(var n=Object.keys(localStorage),a=this.constants.data.adventure+\".\"+e,r=0;r<n.length;r++)if(n[r].startsWith(a+\".paragraph\")!==-1){var i=n[r].substring(0,n[r].indexOf(\".paragraph\"));if(i===a){var s=this.persistenceService.get(n[r]);s&&(delete s.version,delete s.adventureId,t.paragraphs.push(s))}}return t.paragraphs=this.sortParagraphs(t.paragraphs),t}},{key:\"sortParagraphs\",value:function(e){return e.sort(this.compareParagraph)}},{key:\"compareParagraph\",value:function(e,t){return e||t?e?t?e.paragraphNr-t.paragraphNr:-1:1:0}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(117),o=a(s),l=i[\"default\"].module(\"app.components.services.persistence.library\",[]).service(\"libraryPersistenceService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a,r,i,s,o,l){n(this,e),this.persistenceService=a,this.constants=t,this.messagesService=r,this.remoteJsonRetrieverService=i,this.$q=s,this.$filter=o,this.adventurePersistenceService=l}return e.$inject=[\"constants\",\"persistenceService\",\"messagesService\",\"remoteJsonRetrieverService\",\"$q\",\"$filter\",\"adventurePersistenceService\"],a(e,[{key:\"downloadLibrary\",value:function(e){var t=this,n=this.$q.defer(),a=this.remoteJsonRetrieverService.retrieveJson(e.libraryUrl);return a.then(function(a){e.downloadHistory.push(t.now()+\" : downloaded\"),t.updateLibrary(e),t.adventurePersistenceService.updateDownloadableAdventures(a),t.messagesService.successMessage(\"List of the adventures of the library is downloaded\",!1),n.resolve(\"Success\")},function(a){e.downloadHistory.push(t.now()+\" : error\"),t.updateLibrary(e),t.messagesService.errorMessage(a,!1),n.reject(a)}),n.promise}},{key:\"now\",value:function t(){var t=new Date;return this.$filter(\"date\")(t,\"dd.MM.yyyy HH:mm\")}},{key:\"deleteLibrary\",value:function(e){this.persistenceService.remove(this.getLibraryPersistenceKey(e))}},{key:\"importLibraries\",value:function(e){try{var t=JSON.parse(e);this.checkMissingFields(t);for(var n=0;n<t.length;n++){var a=t[n];this.updateLibrary(a)}}catch(r){throw this.messagesService.errorMessage(\"Cannot import libraries\",!1),r}}},{key:\"checkMissingFields\",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],a=[];if(n.siteName||a.push(\"siteName\"),n.libraryUrl||a.push(\"libraryUrl\"),a.length>0)throw this.messagesService.errorMessage(\"Cannot import a library because of missing mandatory fields: \"+a.join(\", \"),!1),this.constants.errors.missingMandatoryFields}}},{key:\"updateLibrary\",value:function(e){e.id||(this.checkDupplicateLibrary(e),e.id=this.getIdFromLibrarySiteName(e.siteName)),e.downloadHistory||(e.downloadHistory=[],e.downloadHistory.push(\"Not downloaded yet\")),this.persistenceService.save(this.getLibraryPersistenceKey(e.id),e)}},{key:\"getIdFromLibrarySiteName\",value:function(e){return encodeURIComponent(e.replace(/\\s+/g,\"-\").toLowerCase())+(new Date).getTime().toString()}\n},{key:\"checkDupplicateLibrary\",value:function(e){if(e.libraryUrl&&this.hasLibraryUrl(e.libraryUrl))throw this.constants.errors.libraryAlreadyExist}},{key:\"hasLibraryUrl\",value:function(e){for(var t=this.getLibraries(),n=0;n<t.length;n++)if(e===t[n].libraryUrl)return!0;return!1}},{key:\"exportLibraries\",value:function(){for(var e=this.getLibraries(),t=0;t<e.length;t++)delete e[t].id,delete e[t].lastDownload;return JSON.stringify(e)}},{key:\"getLibraries\",value:function(){for(var e=[],t=this.getLibraryPersistenceKeys(),n=0;n<t.length;n++)e.push(this.getLibrary(t[n]));return e}},{key:\"getLibraryPersistenceKeys\",value:function(){for(var e=Object.keys(localStorage),t=[],n=0;n<e.length;n++)e[n].startsWith(this.constants.data.library)&&t.push(e[n]);return t}},{key:\"getLibrary\",value:function(e){return this.persistenceService.get(this.getLibraryPersistenceKey(e))}},{key:\"deleteLibrary\",value:function(e){this.persistenceService.remove(this.getLibraryPersistenceKey(e))}},{key:\"getLibraryPersistenceKey\",value:function(e){var t=e;return t.startsWith(this.constants.data.library)||(t=this.constants.data.library+\".\"+t),t}}]),e}();t[\"default\"]=r},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){n(this,e),this.isLocalStorageSupported=t.isLocalStorageSupported(),this.messagesService=a}return e.$inject=[\"softwareRequirementsCheckerService\",\"messagesService\"],a(e,[{key:\"findKeysWithPrefix\",value:function(e){if(!this.isLocalStorageSupported)return null;for(var t=Object.keys(localStorage),n=[],a=0;a<t.length;a++)t[a].startsWith(e)&&n.push(t[a]);return n}},{key:\"get\",value:function(e){if(!this.isLocalStorageSupported)return null;var t=localStorage.getItem(e);if(null===t||\"undefined\"===t||void 0===t)return null;try{return JSON.parse(t)}catch(n){return t}}},{key:\"save\",value:function(e,t){this.isLocalStorageSupported&&(\"string\"==typeof t?localStorage.setItem(e,t):localStorage.setItem(e,JSON.stringify(t)))}},{key:\"remove\",value:function(e){this.isLocalStorageSupported&&localStorage.removeItem(e)}},{key:\"import\",value:function(e){if(this.isLocalStorageSupported){this.cleanAllData();for(var t=JSON.parse(e),n=Object.keys(t),a=0;a<n.length;a++)this.save(n[a],t[n[a]])}}},{key:\"export\",value:function(){return JSON.stringify(localStorage)}},{key:\"cleanAllData\",value:function(){this.isLocalStorageSupported&&localStorage.clear()}},{key:\"getUsedCapacity\",value:function(){return this.isLocalStorageSupported?unescape(encodeURIComponent(JSON.stringify(localStorage))).length:0}},{key:\"getRemainingCapacity\",value:function(){for(var e=\"0123456789\",t=this.repeat(e,10),n=this.repeat(t,10),a=this.repeat(n,10),r=this.repeat(a,10),i=this.repeat(r,10),s=[i,r,a,n,t,e],o=0;o<s.length;o++)for(;this.setLocalStorageWithoutError(s[o]););var l=this.getUsedCapacity();return delete localStorage.test,l}},{key:\"getUsedCapacityInPercent\",value:function(){var e=this.getUsedCapacity(),t=this.getRemainingCapacity(),n=e+t;return e/n*100}},{key:\"setLocalStorageWithoutError\",value:function(e){try{return localStorage.test=localStorage.test+e,!0}catch(t){return!1}}},{key:\"repeat\",value:function(e,t){for(var n=[];t--;)n.push(e);return n.join(\"\")}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(120),o=a(s),l=i[\"default\"].module(\"app.components.services.dices\",[]).service(\"dicesService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e)}return a(e,[{key:\"rollDices\",value:function(e,t){for(var n=0,a=0;a<e;a++)n+=this.randomIntInclusive(1,t);return n}},{key:\"randomIntInclusive\",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(122),o=a(s),l=i[\"default\"].module(\"app.components.services.form-helper\",[]).service(\"formHelperService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.messagesService=t}return e.$inject=[\"messagesService\"],a(e,[{key:\"setErrorFieldsAsDirty\",value:function(e,t){e.$invalid&&(t&&this.messagesService.errorMessage(\"Please complete mandatory fields\",!1),angular.forEach(e.$error,function(e){angular.forEach(e,function(e){e.$setDirty()})}))}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(124),o=a(s),l=i[\"default\"].module(\"app.components.services.remote-json-retriever\",[]).service(\"remoteJsonRetrieverService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,a){n(this,e),this.$http=t,this.$q=a}return e.$inject=[\"$http\",\"$q\"],a(e,[{key:\"retrieveJson\",value:function(e){var t=this.$q.defer();return this.$http.get(e).then(function(n){n&&n.data?t.resolve(n.data):t.reject(\"Cannot get data from \"+e)},function(n){t.reject(\"Cannot get data from \"+e)}),t.promise}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=n(126),o=a(s),l=i[\"default\"].module(\"app.components.services.predefined-data-loader\",[]).service(\"predefinedDataLoaderService\",o[\"default\"]);t[\"default\"]=l},function(e,t){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.libraryPersistenceService=t}return e.$inject=[\"libraryPersistenceService\"],a(e,[{key:\"loadPredefinedData\",value:function(){if(!this.libraryPersistenceService.hasLibraryUrl(\"library-example.json\")){var e='[{\"siteName\":\"Example Library\",\"libraryUrl\":\"library-example.json\"}]';this.libraryPersistenceService.importLibraries(e)}}}]),e}();t[\"default\"]=r},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),i=a(r),s=i[\"default\"].module(\"app.components.constants\",[]).constant(\"constants\",{version:\"20161003\",supportedLanguages:[\"en\",\"fr\"],data:{selectedLanguage:\"selectedLanguage\",adventure:\"adventure\",game:\"game\",library:\"library\"},url:{battle:\"/battle\",chooseLanguage:\"/choose-language\",administration:\"/administration\",games:\"/games\",root:\"/\",selectAdventureForNewGame:\"/games/create/select-adventure\",createPlayerForNewGame:\"/games/create/create-player\",chooseItemsForNewGame:\"/games/create/choose-items\",gameDetail:\"/{adventureId}/{paragraphNr}/game/{gameId}\",about:\"/about?admin\",adventures:\"/adventures\",adventureDetail:\"/adventures\",libraries:\"/libraries\",libraryDetail:\"/libraries\"},choices:{yes:\"Yes\",no:\"No\",ok:\"Ok\",cancel:\"Cancel\"},errors:{adventureAlreadyExist:\"error.adventureAlreadyExist\",libraryAlreadyExist:\"error.libraryAlreadyExist\",missingMandatoryFields:\"error.missingMandatoryFields\"}});t[\"default\"]=s},function(e,t,n){\"use strict\";function a(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(129),i=a(r);n(130);var s=function(){return{template:i[\"default\"],restrict:\"E\"}};t[\"default\"]=s},function(e,t){e.exports=\"<div ui-view></div>\"},function(e,t,n){var a=n(131);\"string\"==typeof a&&(a=[[e.id,a,\"\"]]);n(133)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){t=e.exports=n(132)(),t.push([e.id,\"body{padding-top:70px}.ng-invalid.ng-dirty:required{background-color:#f99!important}.error{color:#f99}.spacer{margin:0;padding:0;height:10px}.table-borderless tbody tr td,.table-borderless tbody tr th,.table-borderless thead tr th{border:none}.editable-div{height:auto;min-height:34px}.modal{display:none;position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:30%}.close{float:right}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer}\",\"\"])},,,function(e,t){/*! http://mths.be/startswith v0.2.0 by @mathias */\nString.prototype.startsWith||!function(){\"use strict\";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(a){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&\"[object RegExp]\"==t.call(e))throw TypeError();var a=n.length,r=String(e),i=r.length,s=arguments.length>1?arguments[1]:void 0,o=s?Number(s):0;o!=o&&(o=0);var l=Math.min(Math.max(o,0),a);if(i+l>a)return!1;for(var c=-1;++c<i;)if(n.charCodeAt(l+c)!=r.charCodeAt(c))return!1;return!0};e?e(String.prototype,\"startsWith\",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()}]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA","sourceRoot":""}