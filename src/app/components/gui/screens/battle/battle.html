<navbar></navbar>
<messages></messages>
<main>
    <div class="container bg-white" role="main">
        <div class="page-header">
            <h1>{{ 'Battle' | translate }}</h1>
        </div>

        <form name="battleTableForm" novalidate="novalidate">
            <table class="table">
                <col style="width:20%">
                <col style="width:10%" ng-repeat="row in $ctrl.stats">
                <col style="width:{{ $ctrl.lastColumnSizeInPercent() }}%">
                <col style="width:5%">
                <thead>
                <tr>
                    <th></th>
                    <th ng-repeat="row in $ctrl.stats">{{ row.name | translate }}</th>
                    <th></th>
                    <th>
                        <button type="button" class="btn btn-default"
                                aria-label="{{ 'Add enemy' | translate}}"
                                title="{{ 'Add enemy' | translate}}"
                                ng-click="$ctrl.addEnemy()">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        </button>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="row in $ctrl.rows">
                    <td ng-if="!$ctrl.isEnemy(row)">
                        {{ row.name }}
                    </td>
                    <td ng-if="$ctrl.isEnemy(row)">
                        <input required type="text" class="form-control" ng-model="row.name">
                        <div class="error" ng-show="!row.name">
                            {{ 'Please fill the name' | translate }}
                        </div>
                    </td>

                    <td ng-repeat="stats in $ctrl.stats">
                        <div ng-if="!stats.editableForEnemy && !!$ctrl.isEnemy(row)">
                            {{ row[stats.name] }}
                        </div>

                        <div ng-if="!!stats.editableForEnemy || !$ctrl.isEnemy(row)">
                            <input required type="number" class="form-control" ng-model="row[stats.name]">
                            <div class="error" ng-show="!row[stats.name]">
                                {{ 'Please fill a value' | translate }}
                            </div>
                        </div>
                    </td>

                    <td></td>

                    <td>
                        <button type="button" class="btn btn-danger"
                                aria-label="{{ 'Remove enemy' | translate }} {{ row.name | translate }}"
                                title="{{ 'Remove enemy' | translate }} '{{ row.name | translate }}'"
                                ng-click="$ctrl.displayRemovePopup(row)"
                                ng-show="$ctrl.isEnemy(row)">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>

        <dices></dices>
        <back-button></back-button>

        <popup config="{{ $ctrl.popupDeleteEnemyConfig }}"></popup>
</main>