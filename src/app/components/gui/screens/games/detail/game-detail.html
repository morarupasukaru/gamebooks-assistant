<navbar></navbar>
<messages></messages>
<main>
    <div class="container bg-white" role="main">
        <div id="paragraphEdit">
            <paragraph paragraph="$ctrl.paragraph"
                       game-id="{{$ctrl.game.id}}"3>
            </paragraph>

            <h2 ng-if="$ctrl.isMapAvailable()" ng-click="$ctrl.toogleCollapseMap()">
                {{ 'Map' | translate }}
                <span class="glyphicon glyphicon-menu-right"
                      ng-class="{ 'glyphicon glyphicon-menu-right' : !!$ctrl.mapCollapsed(), 'glyphicon glyphicon-menu-down' : !$ctrl.mapCollapsed() }">
                </span>
            </h2>
            <nodes ng-if="$ctrl.isMapAvailable()" adventure-id="$ctrl.adventureId" root-paragraph-nr="$ctrl.paragraph.paragraphNr" ng-if="!$ctrl.mapCollapsed()"></nodes>

            <h2 ng-if="$ctrl.isNotesAvailable()" ng-click="$ctrl.toogleCollapseNotes()">
                {{ 'Notes' | translate }}
                <span class="glyphicon glyphicon-menu-right"
                      ng-class="{ 'glyphicon glyphicon-menu-right' : !!$ctrl.notesCollapsed(), 'glyphicon glyphicon-menu-down' : !$ctrl.notesCollapsed() }">
                </span>
            </h2>
            <notes ng-if="$ctrl.isNotesAvailable() && !$ctrl.notesCollapsed()"
                   adventure-id="{{$ctrl.adventureId}}"
                   paragraph-nr="{{$ctrl.paragraph.paragraphNr}}"
                   game-id="{{$ctrl.game.id}}">
            </notes>
        </div>

        <div id="playerSheet" ng-if="!!$ctrl.playerName">
            <h2 ng-if="$ctrl.isStatsAvailable()" ng-click="$ctrl.toogleCollapseStats()">
                {{ 'Player' | translate }} {{ $ctrl.playerName }}
                <span class="glyphicon glyphicon-menu-right"
                      ng-class="{ 'glyphicon glyphicon-menu-right' : !!$ctrl.statsCollapsed(), 'glyphicon glyphicon-menu-down' : !$ctrl.statsCollapsed() }">
                </span>
            </h2>
            <stats ng-if="$ctrl.isStatsAvailable() && !$ctrl.statsCollapsed()"
                   game-id="{{$ctrl.game.id}}"
                   stats="$ctrl.stats">
            </stats>

            <h2 ng-if="$ctrl.isItemsAvailable()" ng-click="$ctrl.toogleCollapseItems()">
                {{ 'Items' | translate }}
                <span class="glyphicon glyphicon-menu-right"
                      ng-class="{ 'glyphicon glyphicon-menu-right' : !!$ctrl.itemsCollapsed(), 'glyphicon glyphicon-menu-down' : !$ctrl.itemsCollapsed() }">
                </span>
            </h2>
            <items ng-if="$ctrl.isItemsAvailable() && !$ctrl.itemsCollapsed()"
                   game-id="{{$ctrl.game.id}}"
                   items="$ctrl.items">
            </items>

            <h2 ng-if="$ctrl.isDicesAvailable()" ng-click="$ctrl.toogleCollapseDices()">
                {{ 'Dices' | translate }}
                <span class="glyphicon glyphicon-menu-right"
                      ng-class="{ 'glyphicon glyphicon-menu-right' : !!$ctrl.dicesCollapsed(), 'glyphicon glyphicon-menu-down' : !$ctrl.dicesCollapsed() }">
                </span>
            </h2>
            <dices ng-if="$ctrl.isDicesAvailable() && !$ctrl.dicesCollapsed()"
                   game-id="{{$ctrl.game.id}}">
            </dices>
            <back-button></back-button>
            <button type="button"
                    class="btn btn-default"
                    ng-if="$ctrl.isBattleAvailable()"
                    ng-click="$ctrl.startBattle()">
                {{ 'Start Battle' | translate }}
            </button>
            <button type="button"
                    class="btn btn-default"
                    ng-if="$ctrl.isAbandonGameAvailable()"
                    ng-click="$ctrl.displayAbandonGamePopup()">
                {{ 'End Game' | translate }}
            </button>
            <button type="button"
                    class="btn btn-default"
                    ng-if="$ctrl.isGameRulesAvailable()"
                    ng-click="$ctrl.goToGameRulesParagraph()">
                {{ "Game's rules" | translate }}
            </button>
        </div>
    </div>

    <end-game-popup config="{{ $ctrl.popupAbandonGameConfig }}"></end-game-popup>
</main>