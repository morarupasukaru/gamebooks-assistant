<navbar></navbar>
<messages></messages>
<main>
    <div class="container bg-white" role="main">
        <div class="page-header">
            <h1>{{ 'Paragraph' | translate }} {{ $ctrl.paragraph.paragraphNr }}</h1>
        </div>

        <div id="paragraphEdit">
            <paragraph paragraph="$ctrl.paragraph" game-id="{{$ctrl.game.id}}"></paragraph>
            <notes ng-if="$ctrl.isNotesAvailable()"
                   adventure-id="{{$ctrl.adventureId}}"
                   paragraph-nr="{{$ctrl.paragraph.paragraphNr}}"
                   game-id="{{$ctrl.game.id}}"></notes>
        </div>

        <div id="playerSheet" ng-if="!!$ctrl.playerName">
            <h2>{{ 'Player' | translate }} {{ $ctrl.playerName }}</h2>
            <stats ng-if="$ctrl.isStatsAvailable()"
                   game-id="{{$ctrl.game.id}}"
                   stats="$ctrl.stats"></stats>
            <items ng-if="$ctrl.isItemsAvailable()"
                   game-id="{{$ctrl.game.id}}"
                   items="$ctrl.items"></items>
            <dices ng-if="$ctrl.isDicesAvailable()"></dices>
            <h2>{{ 'Map' | translate }}</h2>
            <nodes adventure-id="$ctrl.adventureId" root-paragraph-nr="$ctrl.paragraph.paragraphNr"></nodes>
            <back-button></back-button>
            <button type="button"
                    class="btn btn-default"
                    ng-if="$ctrl.isBattleAvailable()"
                    ng-click="$ctrl.startBattle()">
                {{ 'Start Battle' | translate }}
            </button>
            <button type="button"
                    class="btn btn-default"
                    ng-if="$ctrl.isAbandonGameAvailable()"
                    ng-click="$ctrl.displayAbandonGamePopup()">
                {{ 'End Game' | translate }}
            </button>
            <button type="button"
                    class="btn btn-default"
                    ng-if="$ctrl.isGameRulesAvailable()"
                    ng-click="$ctrl.displayGameRulesPopup()">
                {{ "Game's rules" | translate }}
            </button>
        </div>
    </div>

    <popup config="{{ $ctrl.popupGameRulesConfig }}"></popup>
    <end-game-popup config="{{ $ctrl.popupAbandonGameConfig }}"></end-game-popup>
</main>